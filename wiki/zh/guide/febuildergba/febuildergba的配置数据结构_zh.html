<!DOCTYPE html>

<html class="no-js" dir="ltr" lang="ja">
<head>
<meta charset="utf-8"/>
<title>zh:guide:febuildergba:febuildergba的配置数据结构_zh [FE改造wiki]</title>
<meta content="DokuWiki" name="generator"/>
<meta content="#008800" name="theme-color"/>
<meta content="index,follow" name="robots"/>
<meta content="zh,guide,febuildergba,febuildergba的配置数据结构_zh" name="keywords"/>
<!--[if gte IE 9]><!-->
<!--<![endif]-->
<meta content="width=device-width,initial-scale=1" name="viewport"/>
</head>
<body>
<div id="dokuwiki__site"><div class="site dokuwiki mode_show tpl_dokuwiki showSidebar hasSidebar" id="dokuwiki__top">
<!-- ********** HEADER ********** -->
<!-- /header -->
<div class="wrapper group">
<!-- ********** ASIDE ********** -->
<!-- /aside -->
<!-- ********** CONTENT ********** -->
<div id="dokuwiki__content"><div class="pad group">
<div class="pageId"><span>zh:guide:febuildergba:febuildergba的配置数据结构_zh</span></div>
<div class="page group">
<!-- wikipage start -->
<!-- TOC START -->
<div class="dw__toc" id="dw__toc">
<h3 class="toggle">目次</h3>
<div>
<ul class="toc">
<li class="level1"><div class="li"><a href="#配置文件的规则">配置文件的规则</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="#config_configxml">/config/config.xml</a></div></li>
<li class="level2"><div class="li"><a href="#config_translate">/config/translate/</a></div></li>
<li class="level2"><div class="li"><a href="#config_data">/config/data/</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="#搜索规则">搜索规则</a></div></li>
<li class="level3"><div class="li"><a href="#例">例</a></div></li>
<li class="level3"><div class="li"><a href="#列表中">列表中</a></div></li>
</ul>
</li>
<li class="level2"><div class="li"><a href="#config_patch">/config/patch/</a></div></li>
</ul>
</li>
<li class="level1"><div class="li"><a href="#补丁格式">补丁格式</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="#普通物品">普通物品</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="#多种语言">多种语言</a></div></li>
</ul>
</li>
<li class="level2"><div class="li"><a href="#补丁类型addr补丁">补丁类型ADDR补丁</a></div></li>
<li class="level2"><div class="li"><a href="#多字节">多字节</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="#数据尺寸">数据尺寸</a></div></li>
<li class="level3"><div class="li"><a href="#同时指定地址">同时指定地址</a></div></li>
<li class="level3"><div class="li"><a href="#hex">HEX</a></div></li>
<li class="level3"><div class="li"><a href="#地址类型">地址类型</a></div></li>
</ul>
</li>
<li class="level2"><div class="li"><a href="#补丁类型image补丁">补丁类型IMAGE补丁。</a></div></li>
<li class="level2"><div class="li"><a href="#补丁类型struct补丁">补丁类型STRUCT补丁</a></div></li>
<li class="level2"><div class="li"><a href="#补丁类型bin补丁">补丁类型BIN补丁</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="#加入偏移">加入偏移</a></div></li>
<li class="level3"><div class="li"><a href="#直接值_none">直接值 $NONE</a></div></li>
<li class="level3"><div class="li"><a href="#b跳代">B跳代</a></div></li>
<li class="level3"><div class="li"><a href="#bl跳转生成">BL跳转生成</a></div></li>
</ul>
</li>
<li class="level2"><div class="li"><a href="#文本表扩展指令">文本表扩展指令</a></div></li>
<li class="level2"><div class="li"><a href="#补丁类型ea补丁">补丁类型EA补丁</a></div></li>
<li class="level2"><div class="li"><a href="#补丁的种类">补丁的种类</a></div></li>
</ul>
</li>
<li class="level1"><div class="li"><a href="#mod">MOD</a></div></li>
<li class="level1"><div class="li"><a href="#febuildergba启动的参数">FEBuilderGBA启动的参数</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="#rom">[ROM]</a></div></li>
<li class="level2"><div class="li"><a href="#rom_文件名">--rom=文件名</a></div></li>
<li class="level2"><div class="li"><a href="#最后一个rom">--最后一个ROM</a></div></li>
<li class="level2"><div class="li"><a href="#强制版本_版本">--强制版本=版本</a></div></li>
<li class="level2"><div class="li"><a href="#强制细节">--强制细节</a></div></li>
</ul></li>
</ul>
</div>
</div>
<!-- TOC END -->
<h1 class="sectionedit1" id="配置文件的规则">配置文件的规则</h1>
<div class="level1">
</div>
<div class="secedit editbutton_section editbutton_1"></div>
<h2 class="sectionedit2" id="config_configxml">/config/config.xml</h2>
<div class="level2">
<p>
这个工具的设置被存储。 <br/>
<br/>
<br/>
</p>
</div>
<div class="secedit editbutton_section editbutton_2"></div>
<h2 class="sectionedit3" id="config_translate">/config/translate/</h2>
<div class="level2">
<p>
这是该工具使用的翻译资源。<br/>
<br/>
它是 KEY:\\r\\nVALUE 格式，基于像GNU GetText这样的想法。<br/>
<br/>
</p>
<pre class="code">:原始字符串
翻译字符串</pre>
<p>
<br/>
<a class="media" href="https://i.imgur.com/iPFRtmE.jpg" title="https://i.imgur.com/iPFRtmE.jpg"><img alt="i.imgur.com_ipfrtme.jpg" class="mediacenter" src="https://i.imgur.com/iPFRtmE.jpg" title="i.imgur.com_ipfrtme.jpg"/></a><br/>
<br/>
</p>
</div>
<div class="secedit editbutton_section editbutton_3"></div>
<h2 class="sectionedit4" id="config_data">/config/data/</h2>
<div class="level2">
<p>
该工具使用的游戏中有设置数据。<br/>
如果将数据提取为外部资源，则包含似乎更具可扩展性的数据。<br/>
<br/>
<br/>
</p>
</div>
<div class="secedit editbutton_section editbutton_4"></div>
<h3 class="sectionedit5" id="搜索规则">搜索规则</h3>
<div class="level3">
<p>
文件按以下顺序搜索。<br/>
XX包含所选语言。 en=英文, zh=中文.<br/>
file_VERSION.XX.txt<br/>
file_VERSION.txt<br/>
file_ALL.XX.txt<br/>
file_ALL.txt<br/>
<br/>
同样在文件中，有些东西会打开 {J} {U}.<br/>
例如，由于FE8J FE8U中的指针值不同，因此用于此切换。<br/>
<br/>
所有文件格式都是制表符分隔的TSV格式。<br/>
字符代码在UTF-8中统一。<br/>
</p>
</div>
<div class="secedit editbutton_section editbutton_5"></div>
<h3 class="sectionedit6" id="例">例</h3>
<div class="level3">
<div class="table sectionedit7"><table class="inline">
<tr class="row0">
<td class="col0">搜索“foo”</td><td class="col1"></td>
</tr>
<tr class="row1">
<td class="col0">游戏</td><td class="col1">FE8</td>
</tr>
<tr class="row2">
<td class="col0">XX</td><td class="col1">EN</td>
</tr>
<tr class="row3">
<td class="col0">类型</td><td class="col1">FE8U</td>
</tr>
</table></div>
<pre class="code">if ( Exists("config/data/foo_FE8.en.txt") )
{
   return found;
}
if ( Exists("config/data/foo_FE8.txt") )
{
   return found;
}
if ( Exists("config/data/foo_ALL.en.txt") )
{
   return found;
}
if ( Exists("config/data/foo_ALL.txt") )
{
   return found;
}
return NOT_FOUND;</pre>
<p>
<br/>
假设找到了 foo_ALL.txt 。<br/>
<br/>
假定foo_ALL.txt的内容如下所示。<br/>
</p>
<pre class="code">TEST1=A
TEST2=B	{U}
TEST3=C	{J}</pre>
<p>
由于在搜索指令中指定了类型== FE8U，因此获取以下内容。<br/>
</p>
<pre class="code">TEST1=A
TEST2=B</pre>
<p>
如果搜索命令是类型== FE8J，则获取以下内容。<br/>
</p>
<pre class="code">TEST1=A
TEST3=C</pre>
</div>
<div class="secedit editbutton_section editbutton_6"></div>
<h3 class="sectionedit8" id="列表中">列表中</h3>
<div class="level3">
<div class="table sectionedit9"><table class="inline">
<tr class="row0">
<td class="col0">ai1</td><td class="col1">Define the list of unit Placer AI1.</td>
</tr>
<tr class="row1">
<td class="col0">ai2</td><td class="col1">Define the list of unit Placer AI2.</td>
</tr>
<tr class="row2">
<td class="col0">aiscript</td><td class="col1">Define the aiscript command</td>
</tr>
<tr class="row3">
<td class="col0">asmmap</td><td class="col1">Function map. Displays hints during function map disassembly.</td>
</tr>
<tr class="row4">
<td class="col0">base_rom_info</td><td class="col1">Define the capacity and CRC of unmodified ROM.</td>
</tr>
<tr class="row5">
<td class="col0">battleanime_85command</td><td class="col1">Define C85 command list of battle animation.</td>
</tr>
<tr class="row6">
<td class="col0">battleanime_auto_recolor</td><td class="col1">It is used to decide enemy color scheme with battle animation.</td>
</tr>
<tr class="row7">
<td class="col0">battleanime_mode</td><td class="col1">Define the type of battle animation.</td>
</tr>
<tr class="row8">
<td class="col0">event</td><td class="col1">Define the event instruction.</td>
</tr>
<tr class="row9">
<td class="col0">eventcond</td><td class="col1">Define the type of event condition.</td>
</tr>
<tr class="row10">
<td class="col0">func_lang</td><td class="col1">Define the languages available in FEBuilderGBA.</td>
</tr>
<tr class="row11">
<td class="col0">item_anime_effect</td><td class="col1">Define a list of weapon animation effects.</td>
</tr>
<tr class="row12">
<td class="col0">item_staff_use_effect</td><td class="col1">Define the effect of using items.</td>
</tr>
<tr class="row13">
<td class="col0">item_weapon_effect</td><td class="col1">Define the additional effect of the weapon.</td>
</tr>
<tr class="row14">
<td class="col0">item_usability_array_</td><td class="col1">Determine whether items can be used.</td>
</tr>
<tr class="row15">
<td class="col0">item_effect_array_</td><td class="col1">Define the effect of using items.</td>
</tr>
<tr class="row16">
<td class="col0">item_promotion1_array_</td><td class="col1">Define processing when using Promotion Item.</td>
</tr>
<tr class="row17">
<td class="col0">item_promotion2_array_</td><td class="col1">Define whether it is a Promotion Item (FE 7 only).</td>
</tr>
<tr class="row18">
<td class="col0">item_staff1_array_</td><td class="col1">Define the method of target selection of items (maybe).</td>
</tr>
<tr class="row19">
<td class="col0">item_staff2_array_</td><td class="col1">Define the type of Staff.</td>
</tr>
<tr class="row20">
<td class="col0">item_statbooster1_array_</td><td class="col1">Define a message when using stat booster.</td>
</tr>
<tr class="row21">
<td class="col0">item_statbooster2_array_</td><td class="col1">Define Stat Booster and whether it is a Promotion Item.</td>
</tr>
<tr class="row22">
<td class="col0">magic_command</td><td class="col1">Define the command of magic extension.</td>
</tr>
<tr class="row23">
<td class="col0">magic_csa_spell_table</td><td class="col1">Define the condition to search for CSATABLE which defines magic animation of magic extension.</td>
</tr>
<tr class="row24">
<td class="col0">magic_extends</td><td class="col1">Define how to judge whether magic expansion is appropriate or not.</td>
</tr>
<tr class="row25">
<td class="col0">mappointer</td><td class="col1">Define the map pointer name.</td>
</tr>
<tr class="row26">
<td class="col0">mapstyle</td><td class="col1">Define map style list.</td>
</tr>
<tr class="row27">
<td class="col0">other_text</td><td class="col1">Defines an address list in which character string direct value of C language is embedded.</td>
</tr>
<tr class="row28">
<td class="col0">skill_extends</td><td class="col1">Define how to judge whether skill extension is appropriate or not.</td>
</tr>
<tr class="row29">
<td class="col0">skill_extends_*</td><td class="col1">For each skill extends, define the skill ID.</td>
</tr>
<tr class="row30">
<td class="col0">song_instrument</td><td class="col1">Make the instrument information MD5 and assign the instrument name to the instrument address.</td>
</tr>
<tr class="row31">
<td class="col0">song_instrumentset</td><td class="col1">Define how to judge whether NIMAP is right or wrong.</td>
</tr>
<tr class="row32">
<td class="col0">sound</td><td class="col1">Define the name of the sound effect.</td>
</tr>
<tr class="row33">
<td class="col0">sound_foot_steps</td><td class="col1">Define footsteps. FE8 only.</td>
</tr>
<tr class="row34">
<td class="col0">tbl_cond</td><td class="col1">Define whether to use tbl or not.</td>
</tr>
<tr class="row35">
<td class="col0">translate_textid</td><td class="col1">For translation, correspondence table of string IDs in ROMs of US and Japan.</td>
</tr>
<tr class="row36">
<td class="col0">updater.bat.txt</td><td class="col1">It is not a configuration file. It is a batch file of automatic update.</td>
</tr>
</table></div>
<p>
<br/>
<br/>
</p>
</div>
<div class="secedit editbutton_section editbutton_8"></div>
<h2 class="sectionedit10" id="config_patch">/config/patch/</h2>
<div class="level2">
<p>
详细设置patch→补丁。<br/>
您可以从菜单工具 → patch中访问它。<br/>
<br/>
<a class="media" href="https://i.imgur.com/59gvcy9.jpg" title="https://i.imgur.com/59gvcy9.jpg"><img alt="i.imgur.com_59gvcy9.jpg" class="mediacenter" src="https://i.imgur.com/59gvcy9.jpg" title="i.imgur.com_59gvcy9.jpg"/></a><br/>
<br/>
</p>
</div>
<div class="secedit editbutton_section editbutton_10"></div>
<h1 class="sectionedit11" id="补丁格式">补丁格式</h1>
<div class="level1">
<p>
补丁文件是key = value的格式。<br/>
// #; 是一条注释。<br/>
附加0x时，数字数据变为十六进制。<br/>
如果你不添加任何东西，它是一个十进制数字。<br/>
  - 0x08000000有或没有GBA指针，这两种情况都没有问题。<br/>
<br/>
</p>
</div>
<div class="secedit editbutton_section editbutton_11"></div>
<h2 class="sectionedit12" id="普通物品">普通物品</h2>
<div class="level2">
<pre class="code">NAME=补丁名称</pre>
<p>
<br/>
定义补丁的名称。<br/>
如果未定义，它将成为补丁的文件名。<br/>
<br/>
</p>
<pre class="code">TYPE=IMAGE TYPE=ADDR TYPE=STRUCT TYPE=BIN TYPE=EA TYPE=SWITCH</pre>
<p>
<br/>
定义补丁的类型。<br/>
有6种类型。<br/>
详情将在稍后解释。<br/>
<br/>
<br/>
</p>
<pre class="code">INFO=写更多信息\\r\\n 请尽可能描述。</pre>
<p>
<br/>
写更多信息，请换行\\r\\n <br/>
<br/>
<br/>
</p>
<pre class="code">IF:0xEE594=0x4B 0xFA 0x2F 0x59 0x7E 0x19</pre>
<p>
<br/>
定义补丁是否可用。<br/>
在这个例子中，我们正在检查 ROM 0xEE594 是 0x4B 0xFA 0x2F 0x59 0x7E 0x19。<br/>
如果 0xEE594 是 0x4B 0xFA 0x2F 0x59 0x7E 0x19, 则可以使用此补丁。<br/>
<br/>
</p>
<pre class="code">IF_NOT:0xEE594=0x4B 0xFA 0x2F 0x59 0x7E 0x19</pre>
<p>
定义补丁是否可用。<br/>
相反，在ROM中，0xEE594将可用，除非它是 0x4B 0xFA 0x2F 0x59 0x7E 0x19.<br/>
<br/>
</p>
<pre class="code">PATCHED_IF:0x080bb182=0x45 0x46 0xE0 0xB4
PATCHED_IF_NOT:0x080bb182=0x45 0x46 0xE0 0xB4</pre>
<p>
它定义了补丁是否已被修改。<br/>
如果我们修补两次，它将主要用于坏BIN补丁。<br/>
<br/>
<br/>
</p>
</div>
<div class="secedit editbutton_section editbutton_12"></div>
<h3 class="sectionedit13" id="多种语言">多种语言</h3>
<div class="level3">
<p>
要编写英文名称，请添加 .en<br/>
要编写中文名称，请添加 .zh<br/>
<br/>
NAME=Japanese name<br/>
NAME.en=英文<br/>
NAME.zh=中文<br/>
<br/>
从ver20171211开始，现在可以为所有参数指定诸如AAAA.en之类的语言。<br/>
<br/>
<br/>
<br/>
</p>
</div>
<div class="secedit editbutton_section editbutton_13"></div>
<h2 class="sectionedit14" id="补丁类型addr补丁">补丁类型ADDR补丁</h2>
<div class="level2">
<pre class="code">NAME=きずぐすりの回復量
NAME.en=Recovery amount of Vulnerary
NAME.zh=回复杖的回复量

TYPE=ADDR

ADDRESS=0x2fe16

AUTHOR=出典:aeraさんの資料より\r\n</pre>
<p>
<a class="urlextern" href="http://ngmansion.xyz/wiki/hackfe/index.php?%E3%83%91%E3%83%83%E3%83%81#jf501d8a" rel="nofollow" title="http://ngmansion.xyz/wiki/hackfe/index.php?%E3%83%91%E3%83%83%E3%83%81#jf501d8a">http://ngmansion.xyz/wiki/hackfe/index.php?%E3%83%91%E3%83%83%E3%83%81#jf501d8a</a>
</p>
<pre class="code">AUTHOR.zh=来源：从aera的数据\r\n</pre>
<p>
<a class="urlextern" href="http://ngmansion.xyz/wiki/hackfe/index.php?%E3%83%91%E3%83%83%E3%83%81#jf501d8a" rel="nofollow" title="http://ngmansion.xyz/wiki/hackfe/index.php?%E3%83%91%E3%83%83%E3%83%81#jf501d8a">http://ngmansion.xyz/wiki/hackfe/index.php?%E3%83%91%E3%83%83%E3%83%81#jf501d8a</a>
</p>
<pre class="code">AUTHOR.en=Source: From aera's data\r\n</pre>
<p>
<a class="urlextern" href="http://ngmansion.xyz/wiki/hackfe/index.php?%E3%83%91%E3%83%83%E3%83%81#jf501d8a" rel="nofollow" title="http://ngmansion.xyz/wiki/hackfe/index.php?%E3%83%91%E3%83%83%E3%83%81#jf501d8a">http://ngmansion.xyz/wiki/hackfe/index.php?%E3%83%91%E3%83%83%E3%83%81#jf501d8a</a><br/>
~<br/>
FE8J的伤药恢复量存储在0x2fe16中。<br/>
这是一个修改它的补丁。<br/>
<br/>
<a class="media" href="https://i.imgur.com/YLOE1U7.jpg" title="https://i.imgur.com/YLOE1U7.jpg"><img alt="i.imgur.com_yloe1u7.jpg" class="mediacenter" src="https://i.imgur.com/YLOE1U7.jpg" title="i.imgur.com_yloe1u7.jpg"/></a><br/>
<br/>
</p>
</div>
<div class="secedit editbutton_section editbutton_14"></div>
<h2 class="sectionedit15" id="多字节">多字节</h2>
<div class="level2">
<p>
虽然ADDR基本上只有1个字节的变化，<br/>
但可以使用组合框格式使用长字节。<br/>
<br/>
</p>
<pre class="code">NAME=フリーマップから入らないとフリーズする制約を消す
NAME.en=Eliminate the constraint of freezing unless it enters from the world map.
NAME.zh=消除冻结的限制，除非从免费地图进入

//作为地址补丁实施。
TYPE=ADDR

ADDRESS=0xc1e7c
COMBO=默认|0x47 0x2D|fix|0xB8 0xE0</pre>
<p>
<br/>
<a class="media" href="https://i.imgur.com/vRuzDeu.jpg" title="https://i.imgur.com/vRuzDeu.jpg"><img alt="i.imgur.com_vruzdeu.jpg" class="mediacenter" src="https://i.imgur.com/vRuzDeu.jpg" title="i.imgur.com_vruzdeu.jpg"/></a><br/>
<br/>
</p>
</div>
<div class="secedit editbutton_section editbutton_15"></div>
<h3 class="sectionedit16" id="数据尺寸">数据尺寸</h3>
<div class="level3">
<p>
最新支持DATA SIZE规格。<br/>
当DATASIZE=4，它操作为4个字节（由于它是GBA，所以数据以小端编写）。<br/>
<br/>
为了兼容性，如果没有指定，它变成1个字节 DATASIZE=1。<br/>
如果指定了COMBO，则会忽略DATASIZE规范，并且COMBO规范优先。<br/>
<br/>
例: 通过模式选择上FE7更改肖像的琳<br/>
</p>
<pre class="code">NAME=MODE SELECT 顔画像 リン編
NAME.en=MODE SELECT Portrait of the Lyn Editing
NAME.en=头像琳

TYPE=ADDR

ADDRESS=0x4393D8
ADDRESS_TYPE=头像
DATASIZE=4         //出于某种原因，MODE SELECT的肖像ID由4个字节的DWORD存储</pre>
</div>
<div class="secedit editbutton_section editbutton_16"></div>
<h3 class="sectionedit17" id="同时指定地址">同时指定地址</h3>
<div class="level3">
<p>
可以使用空格分隔符将多个地址写入<br/>
每个值都设置相同的值。<br/>
当你需要同时更改不同的地方时使用它。<br/>
<br/>
<br/>
</p>
<pre class="code">NAME=幸運上限
NAME.en=Upper limit of lucky
NAME.zh=幸运上限

//アドレスパッチとして実装します
TYPE=ADDR

ADDRESS=0x80CA0 0x29f0e 0x29f12 0x180d8 0x180dc 0x95694 0x95694 0x9585C</pre>
<p>
例如，由于幸运限制是在各地分散设置的硬编码，<br/>
如上所述，它会立即改变数值。<br/>
</p>
</div>
<div class="secedit editbutton_section editbutton_17"></div>
<h3 class="sectionedit18" id="hex">HEX</h3>
<div class="level3">
<p>
使用 HEX=false 如果您想要将用户界面上显示的数字显示为十进制数字。
</p>
<pre class="code">NAME=最大レベル
NAME.en=Max Level
NAME.zh=最高级别

//作为地址补丁实施。
TYPE=ADDR

ADDRESS=0x25132
HEX=false //它以十进制数显示它</pre>
<p>
<a class="media" href="https://i.imgur.com/cRQavFM.jpg" title="https://i.imgur.com/cRQavFM.jpg"><img alt="i.imgur.com_crqavfm.jpg" class="mediacenter" src="https://i.imgur.com/cRQavFM.jpg" title="i.imgur.com_crqavfm.jpg"/></a>
</p>
</div>
<div class="secedit editbutton_section editbutton_18"></div>
<h3 class="sectionedit19" id="地址类型">地址类型</h3>
<div class="level3">
<p>
请使用地址类型，如果有要与值关联的东西。<br/>
<br/>
</p>
<pre class="code">ADDRESS_TYPE = UNIT //将其视为人物ID（字符ID）
ADDRESS_TYPE = ITEM //将其视为道具ID。
ADDRESS_TYPE = CLASS //将其视为职业ID
ADDRESS_TYPE = SONG //将其视为音乐ID（歌曲ID）</pre>
<p>
For example.<br/>
</p>
<pre class="code">NAME=進撃準備
NAME.en=MUSIC_Preparation
NAME.zh=音乐_进击准备
//作为地址补丁实施。
TYPE=ADDR

ADDRESS=0x080495cc 0x080af17e 0x08031654 0x08090048 0x080960b4 0x0809b880 0x0809c7f6
ADDRESS_TYPE=SONG //准备BGM被改变，它被视为音乐ID。</pre>
<p>
<a class="media" href="https://i.imgur.com/gen0Pz4.jpg" title="https://i.imgur.com/gen0Pz4.jpg"><img alt="i.imgur.com_gen0pz4.jpg" class="mediacenter" src="https://i.imgur.com/gen0Pz4.jpg" title="i.imgur.com_gen0pz4.jpg"/></a>
</p>
</div>
<div class="secedit editbutton_section editbutton_19"></div>
<h2 class="sectionedit20" id="补丁类型image补丁">补丁类型IMAGE补丁。</h2>
<div class="level2">
<p>
<br/>
</p>
<pre class="code">TYPE=IMAGE</pre>
<p>
<br/>
定义补丁来改变形象。<br/>
这个补丁需要用指针写入，而不是图像地址。<br/>
这是因为图像长度可变，所以图像地址可能会改变。<br/>
<br/>
<br/>
以下是修改FE8J FIN的补丁。<br/>
</p>
<pre class="code">NAME=系统_FIN

TYPE=图片

WIDTH=256
HEIGHT=160
//使用的调色板数量。
PALETTE=1

//压缩的图像。
ZIMAGE_POINTER=0xBBF48
//TSA与未压缩的标题。
HEADERTSA_POINTER=0xBBF54
//未压缩的调色板。
PALETTE_POINTER=0xBBF44</pre>
<p>
<br/>
<a class="media" href="https://i.imgur.com/oEtDONy.jpg" title="https://i.imgur.com/oEtDONy.jpg"><img alt="i.imgur.com_oetdony.jpg" class="mediacenter" src="https://i.imgur.com/oEtDONy.jpg" title="i.imgur.com_oetdony.jpg"/></a><br/>
<br/>
未压缩的图像。<br/>
IMAGE_POINTER<br/>
<br/>
压缩的图像。<br/>
ZIMAGE_POINTER<br/>
<br/>
使用压缩的TSA。<br/>
ZTSA_POINTER<br/>
<br/>
使用带压缩标题的TSA。<br/>
ZHEADERTSA_POINTER<br/>
<br/>
将TSA与未压缩的标题一起使用。<br/>
HEADERTSA_POINTER<br/>
<br/>
使用未压缩的调色板。<br/>
PALETTE_POINTER<br/>
<br/>
它用于显示和导入图像。<br/>
在下面的例子中，它是一种条件，它拥有一种具有256×160尺寸图像的16色调色板。<br/>
</p>
<pre class="code">WIDTH=256
HEIGHT=160
//使用的调色板数量。
PALETTE=1</pre>
<p>
<br/>
手工编写图像补丁很难，因此您可以自动生成图像补丁。<br/>
<br/>
在菜单 →工具 →图形工具中，找到图像，找到TSA等，然后单击右下角的补丁制作工具按钮。<br/>
自动制作补丁。<br/>
没有必要每次手工计算指针。<br/>
<br/>
<a class="media" href="https://i.imgur.com/WHG6zIQ.jpg" title="https://i.imgur.com/WHG6zIQ.jpg"><img alt="i.imgur.com_whg6ziq.jpg" class="mediacenter" src="https://i.imgur.com/WHG6zIQ.jpg" title="i.imgur.com_whg6ziq.jpg"/></a><br/>
<br/>
<a class="media" href="https://i.imgur.com/LTklo5l.jpg" title="https://i.imgur.com/LTklo5l.jpg"><img alt="i.imgur.com_ltklo5l.jpg" class="mediacenter" src="https://i.imgur.com/LTklo5l.jpg" title="i.imgur.com_ltklo5l.jpg"/></a><br/>
<br/>
<a class="media" href="https://i.imgur.com/Qj0vh2c.jpg" title="https://i.imgur.com/Qj0vh2c.jpg"><img alt="i.imgur.com_qj0vh2c.jpg" class="mediacenter" src="https://i.imgur.com/Qj0vh2c.jpg" title="i.imgur.com_qj0vh2c.jpg"/></a><br/>
<br/>
<br/>
</p>
</div>
<div class="secedit editbutton_section editbutton_20"></div>
<h2 class="sectionedit21" id="补丁类型struct补丁">补丁类型STRUCT补丁</h2>
<div class="level2">
<pre class="code">TYPE=STRUCT</pre>
<p>
结构补丁 <br/>
<br/>
当你想改变结构等数据时使用它。<br/>
但是，使用工具主体这样复杂的事情是不可能完成的。<br/>
如果你想做出困难的事情，如果它可以被概括，你应该在工具主体一侧。<br/>
<br/>
<br/>
</p>
<pre class="code">//实现它作为一个结构补丁。
TYPE=STRUCT

//指向数据的指针。
POINTER=$GREP4END 0x00 0xB5 0xC0 0x46 0x06 0x48 0xC0 0x46 0x06 0x49 0x89 0x7B 0x89 0x00 0x40 0x58 0x01 0x21 0x00 0xF0 0x02 0xF8 0x17 0x20 0x00 0xBD 0xC0 0x46 0x02 0x4B 0x9F 0x46

//单位等级0x00 0x00 [动画设置指针] = 8个字节
//数据大小（十进制数）。
DATASIZE=8

//数据的数量（十进制数）。
DATACOUNT=12

//定义数据。
B0:UNIT=人物
B1:CLASS=职业
B2=00
B3=00
P4:BATTLEANIMENAME=动画设定</pre>
<p>
<br/>
<a class="media" href="https://i.imgur.com/NOQORUH.jpg" title="https://i.imgur.com/NOQORUH.jpg"><img alt="i.imgur.com_noqoruh.jpg" class="mediacenter" src="https://i.imgur.com/NOQORUH.jpg" title="i.imgur.com_noqoruh.jpg"/></a><br/>
<br/>
FE 8补丁来设置Yugdra补丁的单个动画。<br/>
在怪盗补丁中没有额外的结构，因此我将以Yugdra为例进行说明。<br/>
<br/>
</p>
<pre class="code">B0:UNIT=人物
B1:CLASS=职业
B2=00
B3=00
P4:BATTLEANIMENAME=动画设定

↓↓↓↓↓

struct 
{
	byte	unit;			// +0
	byte	class;			// +1
	byte	zero1;			// +2
	byte	zero2;			// +3
	void*	battleanime;	// +4
};</pre>
<p>
<br/>
<br/>
</p>
<pre class="code">b	sbyte( char )	-128 ～ 127
B	byte			0 ～ 255
W	word			0 ～ 65535
D	dword			0 ～ 4294836225
P	dword			0 ～ 4294836225</pre>
<p>
<br/>
关于D和P之间的区别 <br/>
在P的情况下，它总是被记录为指针。<br/>
当用户输入0x123时，D中记录0x123，但如果是P，则记录为0x08000123。<br/>
<br/>
<br/>
</p>
</div>
<div class="secedit editbutton_section editbutton_21"></div>
<h2 class="sectionedit22" id="补丁类型bin补丁">补丁类型BIN补丁</h2>
<div class="level2">
<p>
type=BIN<br/>
二进制数据和源代码 <br/>
<br/>
</p>
<pre class="code">NAME=SOUND_NIMAP(本地乐器图)

TYPE=BIN

PATCHED_IFNOT:$GREP4 0x00 0x3C 0x00 0x00 0x68 0x27 0x50 0x08 0xFF 0xFA 0x00 0xCC 0x00 0x3C 0x00 0x00 0x18 0x7D 0x29 0x08 0xFF 0xFA 0x00 0xCC 0x00 0x3C 0x00 0x00 0x3C 0x8E 0x28 0x08 0xFF 0xF9 0x00 0xA5 0x01 0x3C 0x00 0x00 0x02 0x00 0x00 0x00 0x00 0x00 0x0F 0x00=0x00 0x3C 0x00 0x00</pre>
<pre class="code">BIN:$FREEAREA=JAPFE8_NI_Map.bin
INFO=MIDI乐器图</pre>
<p>
<br/>
<br/>
<a class="media" href="https://i.imgur.com/oB9KLti.jpg" title="https://i.imgur.com/oB9KLti.jpg"><img alt="i.imgur.com_ob9klti.jpg" class="mediacenter" src="https://i.imgur.com/oB9KLti.jpg" title="i.imgur.com_ob9klti.jpg"/></a><br/>
<br/>
在这个例子中，将JAPFE8_NI_Map.bin粘贴到适当的$ FREEAREA中。<br/>
由于两次粘贴时存在问题，因此$ GREP4正在调查它是否适用。<br/>
<br/>
<br/>
</p>
<pre class="code">宏
$FREEAREA自由区域（分配ROM中的可用空间）
$GREP4		搜索字节字符串，但以4字节为单位（高速）。</pre>
<pre class="code">$GREP1		搜索字节字符串，但是1个字节单位（低速）。</pre>
<pre class="code">$GREP4_NOT	它是有条件的，它不能通过搜索字节字符串找到。
$GREP1_NOT	它是有条件的，它不能通过搜索字节字符串找到。</pre>
<p>
<br/>
<br/>
<br/>
</p>
<pre class="code">NAME=10分割CG表示

//作为BIN补丁实施。
TYPE=BIN

//补丁适应条件。
PATCHED_IF:0x080bb182=0x45 0x46 0xE0 0xB4

BIN:$FREEAREA=show_10split_image.bin

//跳转到插入10格图像显示程序的地方。
JUMP:0x080bb182:$r4=show_10split_image.asm

INFO=10分割CGを表示できるようにします
INFO.zh=它可以显示10个分割的CG
INFO.en=It makes it possible to display 10 divided CG.</pre>
<p>
<a class="media" href="https://i.imgur.com/41kVbuk.jpg" title="https://i.imgur.com/41kVbuk.jpg"><img alt="i.imgur.com_41kvbuk.jpg" class="mediacenter" src="https://i.imgur.com/41kVbuk.jpg" title="i.imgur.com_41kvbuk.jpg"/></a><br/>
<br/>
在空闲区域粘贴show_10split_image.bin。<br/>
为粘贴的数据生成跳转代码。<br/>
r4寄存器用于跳转代码。<br/>
<br/>
要跳转的代码，将生成以下代码。<br/>
</p>
<pre class="code">当地址可以被4个字节整除时。
(addr%4 == 0)
ldr r4,[JUMP ADDR]		//+0
mov pc,r4;				//+2
JUMP ADDR				//+4  --&gt;共8个字节。</pre>
<p>
但是，如果它可以被2个字节整除，则插入NOP。
</p>
<pre class="code">NOP					//+0
ldr r4,[JUMP ADDR]		//+2
mov pc,r4;				//+4
JUMP ADDR				//+6  --&gt;共有10个字节。</pre>
</div>
<div class="secedit editbutton_section editbutton_22"></div>
<h3 class="sectionedit23" id="加入偏移">加入偏移</h3>
<div class="level3">
<pre class="code">JUMP:0x080bb182:$r4:+2=show_10split_image.bin</pre>
<p>
<br/>
这样，您可以跳转到show_10split_image.bin安装位置+ 2的位置。<br/>
<br/>
<br/>
</p>
</div>
<div class="secedit editbutton_section editbutton_23"></div>
<h3 class="sectionedit24" id="直接值_none">直接值 $NONE</h3>
<div class="level3">
<pre class="code">JUMP:0x080bb182:$NONE=show_10split_image.bin</pre>
<p>
<br/>
写入show_10split_image.bin的安装地址，而不是生成跳转代码。<br/>
由于它是一个地址，它消耗4个字节<br/>
要写入的地址是小尾数格式。<br/>
<br/>
作为一种实用的使用方式，我认为我使用它从设置跳转到代码
</p>
<p>
<br/>
</p>
<pre class="code"> //在菜单效果中，输入GNP程序的地址。
 //因为它提供了直接值，所以没有寄存器关系，所以$ NONE。
 //如果是直接值，则需要将其设置为地址+1，因此+1。
JUMP:0x5C53A8:$NONE:+1=main指南本体.bin</pre>
<p>
<br/>
</p>
</div>
<div class="secedit editbutton_section editbutton_24"></div>
<h3 class="sectionedit25" id="b跳代">B跳代</h3>
<div class="level3">
<pre class="code">JUMP:0x988c6:$B=0x9893a</pre>
<p>
<br/>
在地址0x988c6处生成b 0x9893a的ASM操作码。<br/>
b因为是跳跃，所以我不能飞得太远。<br/>
b它消耗2个字节，因为它是跳转。<br/>
<br/>
<br/>
<br/>
</p>
</div>
<div class="secedit editbutton_section editbutton_25"></div>
<h3 class="sectionedit26" id="bl跳转生成">BL跳转生成</h3>
<div class="level3">
<pre class="code">JUMP:0x340cc:$BL=0x988c8</pre>
<p>
<br/>
在地址0x340cc处生成bl 0x988c8的ASM操作码。<br/>
因为这是跳跃，所以不能飞得太远。<br/>
它消耗4个字节，因为它是一个bl跳转。<br/>
<br/>
<br/>
<br/>
</p>
</div>
<div class="secedit editbutton_section editbutton_26"></div>
<h2 class="sectionedit27" id="文本表扩展指令">文本表扩展指令</h2>
<div class="level2">
<pre class="code">EXTENDS:0xe30=TEXT      //将文本表扩展为0xe30。
TEXT:0x0e01=0x0e01.txt  //将0x0e01.txt的内容写入文本ID 0xe01 
TEXT:0x0e02=0x0e02.txt
TEXT:0x0e00=0x0e00.txt</pre>
<p>
<br/>
支持文本表扩展和写入。<br/>
但是，截至目前，我们无法扩展其他表格。<br/>
<br/>
<br/>
</p>
</div>
<div class="secedit editbutton_section editbutton_27"></div>
<h2 class="sectionedit28" id="补丁类型ea补丁">补丁类型EA补丁</h2>
<div class="level2">
<pre class="code">TYPE=EA
EA=ea.event</pre>
<p>
<br/>
<a class="media" href="https://i.imgur.com/WaVR6Ro.jpg" title="https://i.imgur.com/WaVR6Ro.jpg"><img alt="i.imgur.com_wavr6ro.jpg" class="mediacenter" src="https://i.imgur.com/WaVR6Ro.jpg" title="i.imgur.com_wavr6ro.jpg"/></a><br/>
<br/>
使用添加数据 Event Assembler.<br/>
将EA中指定的Event Assembler脚本的内容添加到当前ROM中。<br/>
</p>
</div>
<div class="secedit editbutton_section editbutton_28"></div>
<h2 class="sectionedit29" id="补丁的种类">补丁的种类</h2>
<div class="level2">
<pre class="code">NAME=没有武器显示
TYPE=SWITCH

COMBO.en=no weapons|ONN|with weapons|OFF

ONN:0x0802F5C0=0x00 0x20 0x00 0x20
ONN:0x080D1DE2=0x00 0x20 0x00 0x20

OFF:0x0802F5C0=0xE7 0xF7 0x86 0xF9
OFF:0x080D1DE2=0x44 0xF7 0x75 0xFD</pre>
<p>
“SWITCH补丁”是addr补丁的进一步发展<br/>
<br/>
当需要使用不同的值写入不同的地址时使用它。<br/>
与BIN或EA补丁不同的是，我们处理大约几个字节的较小数据<br/>
<br/>
在这个例子中，显示ON和OFF选项，<br/>
如果是ON，则将ONN定义的内容写入地址<br/>
如果为OFF，则将由OFF定义的内容写入地址<br/>
</p>
</div>
<div class="secedit editbutton_section editbutton_29"></div>
<h1 class="sectionedit30" id="mod">MOD</h1>
<div class="level1">
<p>
您可能希望将结构的未使用区域用作补丁的参数<br/>
在FEBuilderGBA中，它可以通过在patch目录中创建MOD _ *。txt来使用<br/>
<br/>
<br/>
</p>
<pre class="code">IF:0x89268=0x00 0x4B 0x9F 0x46</pre>
<pre class="code">FORM=UnitForm   //它适用于UnitForm（FE 8）
J_38=技能1
J_39=技能2
J_49=个人技能
J_38:NAME=J_38_SKILLASSIGNMENT_SCROLL1_B39
J_39:NAME=J_39_SKILLASSIGNMENT_SCROLL2_B38
J_49:NAME=J_49_SKILLASSIGNMENT_MASTERY</pre>
<p>
<br/>
但是，由于要设置为MOD的参数是FEBuilderGBA的C＃中使用的标签名称，因此有必要了解源代码。<br/>
而且，在欧美的改造中，我认为它不是经常使用的地方，而是经常创造出自己的结构。<br/>
如果你这么认为，MOD可能是日本重塑中经常使用的一个特征。<br/>
</p>
</div>
<div class="secedit editbutton_section editbutton_30"></div>
<h1 class="sectionedit31" id="febuildergba启动的参数">FEBuilderGBA启动的参数</h1>
<div class="level1">
<pre class="code">FEBuilderGBA.exe [ROM] [--选项=值]</pre>
<p>
除非您指定了任何选项，否则FEBuilderGBA将显示欢迎屏幕。<br/>
你可以通过指定其中一个选项来改变它。<br/>
<br/>
<br/>
</p>
</div>
<div class="secedit editbutton_section editbutton_31"></div>
<h2 class="sectionedit32" id="rom">[ROM]</h2>
<div class="level2">
<p>
打开指定的ROM文件名称。<br/>
如果未指定文件名或者无法读取文件，则会显示“欢迎”屏幕。<br/>
</p>
</div>
<div class="secedit editbutton_section editbutton_32"></div>
<h2 class="sectionedit33" id="rom_文件名">--rom=文件名</h2>
<div class="level2">
<p>
这是一样的 [ROM]。<br/>
</p>
</div>
<div class="secedit editbutton_section editbutton_33"></div>
<h2 class="sectionedit34" id="最后一个rom">--最后一个ROM</h2>
<div class="level2">
<p>
打开上次打开的ROM。<br/>
最后一个ROM将是您退出FEBuilderGBA时打开的ROM。<br/>
（在过程结束时，记录当前打开的文件名）
</p>
</div>
<div class="secedit editbutton_section editbutton_34"></div>
<h2 class="sectionedit35" id="强制版本_版本">--强制版本=版本</h2>
<div class="level2">
<p>
强制将ROM作为特定版本打开。<br/>
通常情况下，版本与ROM的标题区分开来，但是当您想用特定版本强制打开它时会使用它。<br/>
当ROM标头由于某种原因被损坏或者当你想要加载另一个GBA游戏进行调试时使用它<br/>
通常你不需要使用它。<br/>
</p>
<div class="table sectionedit36"><table class="inline">
<tr class="row0">
<td class="col0">版本列表</td>
</tr>
<tr class="row1">
<td class="col0">FE8JP</td>
</tr>
<tr class="row2">
<td class="col0">FE7JP</td>
</tr>
<tr class="row3">
<td class="col0">FE6</td>
</tr>
<tr class="row4">
<td class="col0">FE8U</td>
</tr>
<tr class="row5">
<td class="col0">FE7U</td>
</tr>
</table></div>
</div>
<div class="secedit editbutton_section editbutton_35"></div>
<h2 class="sectionedit37" id="强制细节">--强制细节</h2>
<div class="level2">
<p>
强制从详细菜单屏幕开始。<br/>
有一些特殊的原因，当你想跳过简单的屏幕菜单时使用它。<br/>
通常你不需要使用它。<br/>
</p>
</div>
<div class="secedit editbutton_section editbutton_37"></div>
<!-- wikipage stop -->
</div>
<div class="docInfo"><bdi>zh/guide/febuildergba/febuildergba的配置数据结构_zh.txt</bdi> · 最終更新: 2018/09/23 19:09 by <bdi>211.14.62.193</bdi></div>
</div></div><!-- /content -->
<hr class="a11y"/>
<!-- PAGE ACTIONS -->
</div><!-- /wrapper -->
<!-- ********** FOOTER ********** -->
<!-- /footer -->
</div></div><!-- /site -->
<div class="no"><img alt="" height="1" src="../../../..//lib/exe/indexer.php?id=zh/guide/febuildergba/febuildergba的配置数据结构_zh&amp;1542024607" width="2"/></div>
<div class="no" id="screen__mode"></div></body>
</html>
