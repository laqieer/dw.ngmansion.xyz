<!DOCTYPE html>

<html class="no-js" dir="ltr" lang="ja">
<head>
<meta charset="utf-8"/>
<title>data:cg画像 [FE改造wiki]</title>
<meta content="DokuWiki" name="generator"/>
<meta content="#008800" name="theme-color"/>
<meta content="index,follow" name="robots"/>
<meta content="data,cg画像" name="keywords"/>
<!--[if gte IE 9]><!-->
<!--<![endif]-->
<meta content="width=device-width,initial-scale=1" name="viewport"/>
</head>
<body><a href="../../export_xhtml/data/cg画像.html">プレーンHTML</a> | <a href="../../export_raw/data/cg画像.txt">Wikiマークアップ</a><br/>
<div id="dokuwiki__site"><div class="site dokuwiki mode_show tpl_dokuwiki showSidebar hasSidebar" id="dokuwiki__top">
<!-- ********** HEADER ********** -->
<!-- /header -->
<div class="wrapper group">
<!-- ********** ASIDE ********** -->
<!-- /aside -->
<!-- ********** CONTENT ********** -->
<div id="dokuwiki__content"><div class="pad group">
<div class="pageId"><span>data:cg画像</span></div>
<div class="page group">
<!-- wikipage start -->
<!-- TOC START -->
<div class="dw__toc" id="dw__toc">
<h3 class="toggle">目次</h3>
<div>
<ul class="toc">
<li class="level2"><div class="li"><a href="#cg画像テーブル">CG画像テーブル</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="#ed3人組">0:ED3人組</a></div></li>
<li class="level3"><div class="li"><a href="#女王を抱えるエイリーク">1:女王を抱えるエイリーク</a></div></li>
<li class="level3"><div class="li"><a href="#魔石研究">2:魔石研究</a></div></li>
<li class="level3"><div class="li"><a href="#ドラゴンナイト">3:ドラゴンナイト</a></div></li>
<li class="level3"><div class="li"><a href="#ゼトとエイリーク">4:ゼトとエイリーク</a></div></li>
<li class="level3"><div class="li"><a href="#魔王と聖石">5:魔王と聖石</a></div></li>
<li class="level3"><div class="li"><a href="#ゼト訓練">6:ゼト訓練</a></div></li>
<li class="level3"><div class="li"><a href="#ペガサスナイト">7:ペガサスナイト</a></div></li>
<li class="level3"><div class="li"><a href="#ラーチェル乗馬">8:ラーチェル乗馬</a></div></li>
<li class="level3"><div class="li"><a href="#踊り子と町の人">9:踊り子と町の人</a></div></li>
<li class="level3"><div class="li"><a href="#構造体イメージ">構造体イメージ</a></div></li>
<li class="level3"><div class="li"><a href="#ソースコード">ソースコード</a></div></li>
<li class="level3"><div class="li"><a href="#画像の変更方法">画像の変更方法</a></div></li>
</ul></li>
</ul>
</div>
</div>
<!-- TOC END -->
<h2 class="sectionedit1" id="cg画像テーブル">CG画像テーブル</h2>
<div class="level2">
<p>
GBAGE上では“1744～”<br/>
Image - compressed<br/>
TSA - raw<br/>
Palette - raw<br/>
<br/>
CG画像テーブルは、AC0524 から12バイトごと に、0-9まで合計10個あります。(10*12=120バイト)<br/>
<br/>
</p>
</div>
<div class="secedit editbutton_section editbutton_1"></div>
<h3 class="sectionedit2" id="ed3人組">0:ED3人組</h3>
<div class="level3">
<div class="table sectionedit3"><table class="inline">
<tr class="row0">
<th class="col0">Address</th><td class="col1">AC0524</td><td class="col2" colspan="4" rowspan="5"><a class="media" href="cg画像/0.png" title="data:cg画像:0.png"><img alt="" class="media" src="cg画像/0.png"/></a></td>
</tr>
<tr class="row1">
<th class="col0">Table</th><td class="col1">AC0394</td>
</tr>
<tr class="row2">
<th class="col0">TSA</th><td class="col1">B04F70</td>
</tr>
<tr class="row3">
<th class="col0">Pal</th><td class="col1">B07E78</td>
</tr>
<tr class="row4">
<th class="col0">row1</th><td class="col1">AD247C</td>
</tr>
<tr class="row5">
<th class="col0">row2</th><td class="col1">AD2A4C</td><th class="col2">row3</th><td class="col3">AD324C</td><th class="col4">row4</th><td class="col5">AD3A70</td>
</tr>
<tr class="row6">
<th class="col0">row5</th><td class="col1">AD42D4</td><th class="col2">row6</th><td class="col3">AD4B2C</td><th class="col4">row7</th><td class="col5">AD53AC</td>
</tr>
<tr class="row7">
<th class="col0">row8</th><td class="col1">AD5C14</td><th class="col2">row9</th><td class="col3">AD6484</td><th class="col4">row10</th><td class="col5">AD6CE4</td>
</tr>
</table></div>
</div>
<div class="secedit editbutton_section editbutton_2"></div>
<h3 class="sectionedit4" id="女王を抱えるエイリーク">1:女王を抱えるエイリーク</h3>
<div class="level3">
<div class="table sectionedit5"><table class="inline">
<tr class="row0">
<th class="col0">Address</th><td class="col1">AC0530</td><td class="col2" colspan="4" rowspan="5"><a class="media" href="cg画像/1.png" title="data:cg画像:1.png"><img alt="" class="media" src="cg画像/1.png"/></a></td>
</tr>
<tr class="row1">
<th class="col0">Table</th><td class="col1">AC03BC</td>
</tr>
<tr class="row2">
<th class="col0">TSA</th><td class="col1">B05424</td>
</tr>
<tr class="row3">
<th class="col0">Pal</th><td class="col1">B07F38</td>
</tr>
<tr class="row4">
<th class="col0">row1</th><td class="col1">AD74EC</td>
</tr>
<tr class="row5">
<th class="col0">row2</th><td class="col1">AD7C78</td><th class="col2">row3</th><td class="col3">AD8490</td><th class="col4">row4</th><td class="col5">AD8CA4</td>
</tr>
<tr class="row6">
<th class="col0">row5</th><td class="col1">AD94B0</td><th class="col2">row6</th><td class="col3">AD9CC4</td><th class="col4">row7</th><td class="col5">ADA508</td>
</tr>
<tr class="row7">
<th class="col0">row8</th><td class="col1">ADACB0</td><th class="col2">row9</th><td class="col3">ADB4A4</td><th class="col4">row10</th><td class="col5">ADBCB8</td>
</tr>
</table></div>
</div>
<div class="secedit editbutton_section editbutton_4"></div>
<h3 class="sectionedit6" id="魔石研究">2:魔石研究</h3>
<div class="level3">
<div class="table sectionedit7"><table class="inline">
<tr class="row0">
<th class="col0">Address</th><td class="col1">AC053C</td><td class="col2" colspan="4" rowspan="5"><a class="media" href="cg画像/2.png" title="data:cg画像:2.png"><img alt="" class="media" src="cg画像/2.png"/></a></td>
</tr>
<tr class="row1">
<th class="col0">Table</th><td class="col1">AC03E4</td>
</tr>
<tr class="row2">
<th class="col0">TSA</th><td class="col1">B058D8</td>
</tr>
<tr class="row3">
<th class="col0">Pal</th><td class="col1">B07FF8</td>
</tr>
<tr class="row4">
<th class="col0">row1</th><td class="col1">ADC494</td>
</tr>
<tr class="row5">
<th class="col0">row2</th><td class="col1">ADCCC4</td><th class="col2">row3</th><td class="col3">ADD51C</td><th class="col4">row4</th><td class="col5">ADDD78</td>
</tr>
<tr class="row6">
<th class="col0">row5</th><td class="col1">ADE5EC</td><th class="col2">row6</th><td class="col3">ADEE6C</td><th class="col4">row7</th><td class="col5">ADF6C8</td>
</tr>
<tr class="row7">
<th class="col0">row8</th><td class="col1">ADFEC8</td><th class="col2">row9</th><td class="col3">AE0624</td><th class="col4">row10</th><td class="col5">AE0DE8</td>
</tr>
</table></div>
</div>
<div class="secedit editbutton_section editbutton_6"></div>
<h3 class="sectionedit8" id="ドラゴンナイト">3:ドラゴンナイト</h3>
<div class="level3">
<div class="table sectionedit9"><table class="inline">
<tr class="row0">
<th class="col0">Address</th><td class="col1">AC0548</td><td class="col2" colspan="4" rowspan="5"><a class="media" href="cg画像/3.png" title="data:cg画像:3.png"><img alt="" class="media" src="cg画像/3.png"/></a></td>
</tr>
<tr class="row1">
<th class="col0">Table</th><td class="col1">AC040C</td>
</tr>
<tr class="row2">
<th class="col0">TSA</th><td class="col1">B05D8C</td>
</tr>
<tr class="row3">
<th class="col0">Pal</th><td class="col1">B080B8</td>
</tr>
<tr class="row4">
<th class="col0">row1</th><td class="col1">AE15E4</td>
</tr>
<tr class="row5">
<th class="col0">row2</th><td class="col1">AE1DB4</td><th class="col2">row3</th><td class="col3">AE258C</td><th class="col4">row4</th><td class="col5">AE2D04</td>
</tr>
<tr class="row6">
<th class="col0">row5</th><td class="col1">AE3510</td><th class="col2">row6</th><td class="col3">AE3d30</td><th class="col4">row7</th><td class="col5">AE4584</td>
</tr>
<tr class="row7">
<th class="col0">row8</th><td class="col1">AE4DB4</td><th class="col2">row9</th><td class="col3">AE5580</td><th class="col4">row10</th><td class="col5">AE5DB8</td>
</tr>
</table></div>
</div>
<div class="secedit editbutton_section editbutton_8"></div>
<h3 class="sectionedit10" id="ゼトとエイリーク">4:ゼトとエイリーク</h3>
<div class="level3">
<div class="table sectionedit11"><table class="inline">
<tr class="row0">
<th class="col0">Address</th><td class="col1">AC0554</td><td class="col2" colspan="4" rowspan="5"><a class="media" href="cg画像/4.png" title="data:cg画像:4.png"><img alt="" class="media" src="cg画像/4.png"/></a></td>
</tr>
<tr class="row1">
<th class="col0">Table</th><td class="col1">AC0434</td>
</tr>
<tr class="row2">
<th class="col0">TSA</th><td class="col1">B06240</td>
</tr>
<tr class="row3">
<th class="col0">Pal</th><td class="col1">B08178</td>
</tr>
<tr class="row4">
<th class="col0">row1</th><td class="col1">AE661C</td>
</tr>
<tr class="row5">
<th class="col0">row2</th><td class="col1">AE6E58</td><th class="col2">row3</th><td class="col3">AE76BC</td><th class="col4">row4</th><td class="col5">AE7F20</td>
</tr>
<tr class="row6">
<th class="col0">row5</th><td class="col1">AE8780</td><th class="col2">row6</th><td class="col3">AE8FF8</td><th class="col4">row7</th><td class="col5">AE9864</td>
</tr>
<tr class="row7">
<th class="col0">row8</th><td class="col1">AEA080</td><th class="col2">row9</th><td class="col3">AEA8B0</td><th class="col4">row10</th><td class="col5">AEB0C8</td>
</tr>
</table></div>
</div>
<div class="secedit editbutton_section editbutton_10"></div>
<h3 class="sectionedit12" id="魔王と聖石">5:魔王と聖石</h3>
<div class="level3">
<div class="table sectionedit13"><table class="inline">
<tr class="row0">
<th class="col0">Address</th><td class="col1">AC0560</td><td class="col2" colspan="4" rowspan="5"><a class="media" href="cg画像/5.png" title="data:cg画像:5.png"><img alt="" class="media" src="cg画像/5.png"/></a></td>
</tr>
<tr class="row1">
<th class="col0">Table</th><td class="col1">AC045C</td>
</tr>
<tr class="row2">
<th class="col0">TSA</th><td class="col1">B066F4</td>
</tr>
<tr class="row3">
<th class="col0">Pal</th><td class="col1">B08238</td>
</tr>
<tr class="row4">
<th class="col0">row1</th><td class="col1">AEB8C8</td>
</tr>
<tr class="row5">
<th class="col0">row2</th><td class="col1">AEC078</td><th class="col2">row3</th><td class="col3">AEC85C</td><th class="col4">row4</th><td class="col5">AED054</td>
</tr>
<tr class="row6">
<th class="col0">row5</th><td class="col1">AED890</td><th class="col2">row6</th><td class="col3">AEE0CC</td><th class="col4">row7</th><td class="col5">AEE928</td>
</tr>
<tr class="row7">
<th class="col0">row8</th><td class="col1">AEF158</td><th class="col2">row9</th><td class="col3">AEF960</td><th class="col4">row10</th><td class="col5">AF0118</td>
</tr>
</table></div>
</div>
<div class="secedit editbutton_section editbutton_12"></div>
<h3 class="sectionedit14" id="ゼト訓練">6:ゼト訓練</h3>
<div class="level3">
<div class="table sectionedit15"><table class="inline">
<tr class="row0">
<th class="col0">Address</th><td class="col1">AC056C</td><td class="col2" colspan="4" rowspan="5"><a class="media" href="cg画像/6.png" title="data:cg画像:6.png"><img alt="" class="media" src="cg画像/6.png"/></a></td>
</tr>
<tr class="row1">
<th class="col0">Table</th><td class="col1">AC0484</td>
</tr>
<tr class="row2">
<th class="col0">TSA</th><td class="col1">B06BA8</td>
</tr>
<tr class="row3">
<th class="col0">Pal</th><td class="col1">B082F8</td>
</tr>
<tr class="row4">
<th class="col0">row1</th><td class="col1">AF0858</td>
</tr>
<tr class="row5">
<th class="col0">row2</th><td class="col1">AF106C</td><th class="col2">row3</th><td class="col3">AF18C0</td><th class="col4">row4</th><td class="col5">AF2114</td>
</tr>
<tr class="row6">
<th class="col0">row5</th><td class="col1">AF2970</td><th class="col2">row6</th><td class="col3">AF31E4</td><th class="col4">row7</th><td class="col5">AF3A60</td>
</tr>
<tr class="row7">
<th class="col0">row8</th><td class="col1">AF42D4</td><th class="col2">row9</th><td class="col3">AF4B28</td><th class="col4">row10</th><td class="col5">AF5378</td>
</tr>
</table></div>
</div>
<div class="secedit editbutton_section editbutton_14"></div>
<h3 class="sectionedit16" id="ペガサスナイト">7:ペガサスナイト</h3>
<div class="level3">
<div class="table sectionedit17"><table class="inline">
<tr class="row0">
<th class="col0">Address</th><td class="col1">AC0578</td><td class="col2" colspan="4" rowspan="5"><a class="media" href="cg画像/7.png" title="data:cg画像:7.png"><img alt="" class="media" src="cg画像/7.png"/></a></td>
</tr>
<tr class="row1">
<th class="col0">Table</th><td class="col1">AC04AC</td>
</tr>
<tr class="row2">
<th class="col0">TSA</th><td class="col1">B0705C</td>
</tr>
<tr class="row3">
<th class="col0">Pal</th><td class="col1">B083B8</td>
</tr>
<tr class="row4">
<th class="col0">row1</th><td class="col1">AF5B88</td>
</tr>
<tr class="row5">
<th class="col0">row2</th><td class="col1">AF6198</td><th class="col2">row3</th><td class="col3">AF6974</td><th class="col4">row4</th><td class="col5">AF7178</td>
</tr>
<tr class="row6">
<th class="col0">row5</th><td class="col1">AF79AC</td><th class="col2">row6</th><td class="col3">AF81D8</td><th class="col4">row7</th><td class="col5">AF8A34</td>
</tr>
<tr class="row7">
<th class="col0">row8</th><td class="col1">AF9284</td><th class="col2">row9</th><td class="col3">AF9AA0</td><th class="col4">row10</th><td class="col5">AFA288</td>
</tr>
</table></div>
</div>
<div class="secedit editbutton_section editbutton_16"></div>
<h3 class="sectionedit18" id="ラーチェル乗馬">8:ラーチェル乗馬</h3>
<div class="level3">
<div class="table sectionedit19"><table class="inline">
<tr class="row0">
<th class="col0">Address</th><td class="col1">AC0584</td><td class="col2" colspan="4" rowspan="5"><a class="media" href="cg画像/8.png" title="data:cg画像:8.png"><img alt="" class="media" src="cg画像/8.png"/></a></td>
</tr>
<tr class="row1">
<th class="col0">Table</th><td class="col1">AC04D4</td>
</tr>
<tr class="row2">
<th class="col0">TSA</th><td class="col1">B07510</td>
</tr>
<tr class="row3">
<th class="col0">Pal</th><td class="col1">B08478</td>
</tr>
<tr class="row4">
<th class="col0">row1</th><td class="col1">AFAACC</td>
</tr>
<tr class="row5">
<th class="col0">row2</th><td class="col1">AFB244</td><th class="col2">row3</th><td class="col3">AFBA90</td><th class="col4">row4</th><td class="col5">AFC304</td>
</tr>
<tr class="row6">
<th class="col0">row5</th><td class="col1">AFCB6C</td><th class="col2">row6</th><td class="col3">AFD380</td><th class="col4">row7</th><td class="col5">AFDBC0</td>
</tr>
<tr class="row7">
<th class="col0">row8</th><td class="col1">AFE41C</td><th class="col2">row9</th><td class="col3">AFEC80</td><th class="col4">row10</th><td class="col5">AFF4AC</td>
</tr>
</table></div>
</div>
<div class="secedit editbutton_section editbutton_18"></div>
<h3 class="sectionedit20" id="踊り子と町の人">9:踊り子と町の人</h3>
<div class="level3">
<div class="table sectionedit21"><table class="inline">
<tr class="row0">
<th class="col0">Address</th><td class="col1">AC0590</td><td class="col2" colspan="4" rowspan="5"><a class="media" href="cg画像/9.png" title="data:cg画像:9.png"><img alt="" class="media" src="cg画像/9.png"/></a></td>
</tr>
<tr class="row1">
<th class="col0">Table</th><td class="col1">AC04FC</td>
</tr>
<tr class="row2">
<th class="col0">TSA</th><td class="col1">B079C4</td>
</tr>
<tr class="row3">
<th class="col0">Pal</th><td class="col1">B08538</td>
</tr>
<tr class="row4">
<th class="col0">row1</th><td class="col1">AFFCA0</td>
</tr>
<tr class="row5">
<th class="col0">row2</th><td class="col1">B00488</td><th class="col2">row3</th><td class="col3">B00CC0</td><th class="col4">row4</th><td class="col5">B01514</td>
</tr>
<tr class="row6">
<th class="col0">row5</th><td class="col1">B01D64</td><th class="col2">row6</th><td class="col3">B025B8</td><th class="col4">row7</th><td class="col5">B02E04</td>
</tr>
<tr class="row7">
<th class="col0">row8</th><td class="col1">B03674</td><th class="col2">row9</th><td class="col3">B03ED0</td><th class="col4">row10</th><td class="col5">B04728</td>
</tr>
</table></div>
</div>
<div class="secedit editbutton_section editbutton_20"></div>
<h3 class="sectionedit22" id="構造体イメージ">構造体イメージ</h3>
<div class="level3">
<pre class="code">struct split10image_list{
 split10image* table;
 tsa*         tsa;
 pallet*      pallet;
}; sizeof(Table) == 4*3 = 12バイト

struct split10image{
 image*    row1; //圧縮画像10個
 image*    row2;
 image*    row3;
 image*    row4;
 image*    row5;
 image*    row6;
 image*    row7;
 image*    row8;
 image*    row9;
 image*    row10;
};</pre>
</div>
<div class="secedit editbutton_section editbutton_22"></div>
<h3 class="sectionedit23" id="ソースコード">ソースコード</h3>
<div class="level3">
<p>
ディフォルトでは、CGを表示させられないので、唯一表示できる0:ED3人組を表示する命令を拡張して、表示できるようにします。<br/>
関数080bb17cが、3人組を表示する専用命令とかしているので、これを拡張します。<br/>
<br/>
</p>
<p>
show_10split_image_hook.asm
</p>
<pre class="code">;3人組みを表示する関数を拡張して、ED挿絵を表示できるようにする フック部
;
;3人組を描画する関数をフックする.
;

@thumb

;ジャンプ.
@org	$080bb182
ldr	r4, =$08E4FD50
mov	pc, r4</pre>
<p>
show_10split_image.asm
</p>
<pre class="code">;3人組みを表示する関数を拡張して、ED挿絵を表示できるようにする 本体
;
;ED3人組を表示するコード
;221A0000
;42210000 00000200
;221A0000
;↓↓Nで切り替えられるようにする↓↓
;221A0000
;42210[N]00 00000200
;221A0000
;
;画像表示後、マップがおかしくなる時がある。
;その時は、適当に背景を描画して背景消去してください。背景付き会話でも可。
;画像表示時間を延ばしたいときは、 後ろの221A0000の前にウェイト命令を。
;
;N=
;[0]-&gt;0x08ac0524 ED3人組
;[1]-&gt;0x08AC0530 王女を抱えるエイリーク
;[2]-&gt;0x08ac053c 魔石研究
;[3]-&gt;0x08AC0548 ドラゴンナイト
;[4]-&gt;0x08AC0554 ゼトとエイリーク
;[5]-&gt;0x08AC0560 魔王と聖石
;[6]-&gt;0x08AC056C ゼト訓練
;[7]-&gt;0x08AC0578 ペガサスナイト
;[8]-&gt;0x08AC0584 ラーチェル乗馬
;[9]-&gt;0x08AC0590 踊り子と町の人
;
@thumb
@org	$08E4FD50
 
mov r4,r5           ;r5のメモリ位置がどうしても必要
 
mov r5,r8           ;元の処理をする
push	{r5, r6, r7}
mov	r9, r0
mov	r7, r1
mov	r8, r2
mov	r10, r3         ;ここまで元処理
 
mov r0,r4           ;元r5のメモリ位置 + 0x38 = 現在のイベント命令 スクリプトコードへのポインタ
add r0,#0x38
 
ldr r0,[r0]         ; 現在のイベント命令 スクリプトコードへ
ldrb r6,[r0,#0x2]   ; イベント命令 スクリプトコードへ 番号をとる.
 
mov r0,#0x0C
mul r6,r0           ; 1つ 12バイト区切り 番号*12バイト
ldr r0,=$0x08ac0524
add r6,r6,r0        ;$0x08ac0524 + (12バイト*個数)
                    ;
                    ;struct split10image_list{
                    ; split10image* table;
                    ; tsa*         tsa;
                    ; pallet*      pallet;
                    ;}; sizeof() == 4*3 = 12バイト
                    ;
                    ;struct split10image{
                    ; image*    row1; //圧縮画像10個
                    ; image*    row2;
                    ; image*    row3;
                    ; image*    row4;
                    ; image*    row5;
                    ; image*    row6;
                    ; image*    row7;
                    ; image*    row8;
                    ; image*    row9;
                    ; image*    row10;
                    ;};
                    ;
 
;元に戻す.
ldr	r0, =$080bb196  ;080bb196 2500     	mov	r5, #0        //r5=0
mov	pc, r0</pre>
</div>
<div class="secedit editbutton_section editbutton_23"></div>
<h3 class="sectionedit24" id="画像の変更方法">画像の変更方法</h3>
<div class="level3">
<p>
まだわかりません。<br/>
専用ツールを作らないとダメかも。<br/>
</p>
</div>
<div class="secedit editbutton_section editbutton_24"></div>
<!-- wikipage stop -->
</div>
<div class="docInfo"><bdi>data/cg画像.txt</bdi> · 最終更新: 2018/09/09 18:46 by <bdi>aera</bdi></div>
</div></div><!-- /content -->
<hr class="a11y"/>
<!-- PAGE ACTIONS -->
</div><!-- /wrapper -->
<!-- ********** FOOTER ********** -->
<!-- /footer -->
</div></div><!-- /site -->
<div class="no"><img alt="" height="1" src="../..//lib/exe/indexer.php?id=data/cg画像&amp;1686430149" width="2"/></div>
<div class="no" id="screen__mode"></div></body>
</html>
