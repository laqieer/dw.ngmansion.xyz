<!DOCTYPE html>

<html class="no-js" dir="ltr" lang="ja">
<head>
<meta charset="utf-8"/>
<title>guide:フォント改造 [FE改造wiki]</title>
<meta content="DokuWiki" name="generator"/>
<meta content="#008800" name="theme-color"/>
<meta content="index,follow" name="robots"/>
<meta content="guide,フォント改造" name="keywords"/>
<!--[if gte IE 9]><!-->
<!--<![endif]-->
<meta content="width=device-width,initial-scale=1" name="viewport"/>
</head>
<body><a href="../../export_xhtml/guide/フォント改造.html">プレーンHTML</a> | <a href="../../export_raw/guide/フォント改造.txt">Wikiマークアップ</a><br/>
<div id="dokuwiki__site"><div class="site dokuwiki mode_show tpl_dokuwiki showSidebar hasSidebar" id="dokuwiki__top">
<!-- ********** HEADER ********** -->
<!-- /header -->
<div class="wrapper group">
<!-- ********** ASIDE ********** -->
<!-- /aside -->
<!-- ********** CONTENT ********** -->
<div id="dokuwiki__content"><div class="pad group">
<div class="pageId"><span>guide:フォント改造</span></div>
<div class="page group">
<!-- wikipage start -->
<!-- TOC START -->
<div class="dw__toc" id="dw__toc">
<h3 class="toggle">目次</h3>
<div>
<ul class="toc">
<li class="level2"><div class="li"><a href="#用意するもの">用意するもの</a></div></li>
<li class="level2"><div class="li"><a href="#feのフォントは2つあります">FEのフォントは2つあります。</a></div></li>
<li class="level1"><div class="li"><a href="#武器フォント_てつのけんを鉄の剣にしよう">武器フォント　てつのけんを鉄の剣にしよう。</a></div></li>
<li class="level2"><div class="li"><a href="#step_a01">step_a01</a></div></li>
<li class="level2"><div class="li"><a href="#step_a02">step_a02</a></div></li>
<li class="level2"><div class="li"><a href="#step_a03">step_a03</a></div></li>
<li class="level2"><div class="li"><a href="#step_a04">step_a04</a></div></li>
<li class="level2"><div class="li"><a href="#step_a05">step_a05</a></div></li>
<li class="level2"><div class="li"><a href="#step_a06">step_a06</a></div></li>
<li class="level2"><div class="li"><a href="#step_a07">step_a07</a></div></li>
<li class="level2"><div class="li"><a href="#step_a08">step_a08</a></div></li>
<li class="level2"><div class="li"><a href="#step_a09">step_a09</a></div></li>
<li class="level2"><div class="li"><a href="#step_a10">step_a10</a></div></li>
<li class="level2"><div class="li"><a href="#step_a11">step_a11</a></div></li>
<li class="level2"><div class="li"><a href="#step_a12">step_a12</a></div></li>
<li class="level2"><div class="li"><a href="#step_a13">step_a13</a></div></li>
<li class="level2"><div class="li"><a href="#step_a14">step_a14</a></div></li>
<li class="level2"><div class="li"><a href="#step_a15">step_a15</a></div></li>
<li class="level2"><div class="li"><a href="#step_a16">step_a16</a></div></li>
<li class="level2"><div class="li"><a href="#step_a17">step_a17</a></div></li>
<li class="level2"><div class="li"><a href="#step_a18">step_a18</a></div></li>
<li class="level1"><div class="li"><a href="#台詞フォントにない文字を作ろう">台詞フォントにない文字を作ろう</a></div></li>
<li class="level2"><div class="li"><a href="#step_b01">step_b01</a></div></li>
<li class="level2"><div class="li"><a href="#step_b02">step_b02</a></div></li>
<li class="level2"><div class="li"><a href="#step_b03">step_b03</a></div></li>
<li class="level2"><div class="li"><a href="#step_b04">step_b04</a></div></li>
<li class="level2"><div class="li"><a href="#step_b05">step_b05</a></div></li>
<li class="level2"><div class="li"><a href="#step_b06">step_b06</a></div></li>
<li class="level2"><div class="li"><a href="#step_b07">step_b07</a></div></li>
<li class="level2"><div class="li"><a href="#step_b08">step_b08</a></div></li>
<li class="level2"><div class="li"><a href="#step_b09">step_b09</a></div></li>
<li class="level2"><div class="li"><a href="#step_b10">step_b10</a></div></li>
<li class="level2"><div class="li"><a href="#step_b11">step_b11</a></div></li>
<li class="level2"><div class="li"><a href="#step_b12">step_b12</a></div></li>
<li class="level2"><div class="li"><a href="#step_b13">step_b13</a></div></li>
<li class="level2"><div class="li"><a href="#step_b14">step_b14</a></div></li>
<li class="level2"><div class="li"><a href="#step_b15">step_b15</a></div></li>
<li class="level2"><div class="li"><a href="#step_b16">step_b16</a></div></li>
<li class="level2"><div class="li"><a href="#step_b17">step_b17</a></div></li>
<li class="level2"><div class="li"><a href="#step_b18">step_b18</a></div></li>
<li class="level1"><div class="li"><a href="#トラブルシューティング">トラブルシューティング</a></div></li>
<li class="level2"><div class="li"><a href="#qインポートしたフォントが何かおかしい">Q:インポートしたフォントが何かおかしい</a></div></li>
<li class="level1"><div class="li"><a href="#技術資料">技術資料</a></div></li>
<li class="level2"><div class="li"><a href="#アルゴリズム">アルゴリズム</a></div></li>
<li class="level2"><div class="li"><a href="#フォント構造体">フォント構造体</a></div></li>
<li class="level2"><div class="li"><a href="#擬似コード">擬似コード</a></div></li>
</ul>
</div>
</div>
<!-- TOC END -->
<p>
FE8でフォントがない文字を表示させると、ハートマークになります。<br/>
ハートマークではなく、好きな文字を出せるようにする方法について説明します。<br/>
<a class="media" href="../http///i.imgur.com/9iILbuU.jpg" title="http://i.imgur.com/9iILbuU.jpg"><img alt="i.imgur.com_9iilbuu.jpg" class="mediacenter" src="../http///i.imgur.com/9iILbuU.jpg" title="i.imgur.com_9iilbuu.jpg"/></a><br/>
<a class="media" href="../http///i.imgur.com/GpwfsFE.jpg" title="http://i.imgur.com/GpwfsFE.jpg"><img alt="i.imgur.com_gpwfsfe.jpg" class="mediacenter" src="../http///i.imgur.com/GpwfsFE.jpg" title="i.imgur.com_gpwfsfe.jpg"/></a>
</p>
<h2 class="sectionedit1" id="用意するもの">用意するもの</h2>
<div class="level2">
<p>
fefont<br/>
<a class="urlextern" href="http://ux.getuploader.com/FE4/download/192/FeFont.zip" rel="nofollow" title="http://ux.getuploader.com/FE4/download/192/FeFont.zip">http://ux.getuploader.com/FE4/download/192/FeFont.zip</a><br/>
<br/>
edge<br/>
<a class="urlextern" href="http://takabosoft.com/edge" rel="nofollow" title="http://takabosoft.com/edge">http://takabosoft.com/edge</a>
</p>
</div>
<div class="secedit editbutton_section editbutton_1"></div>
<h2 class="sectionedit2" id="feのフォントは2つあります">FEのフォントは2つあります。</h2>
<div class="level2">
<p>
武器名などを表示するフォントと、台詞をしゃべるためのフォントは別物です。<br/>
まずは、どちらのフォントを改造したいのか、確認する必要があります。<br/>
<br/>
どちらのフォントにせよ、デザインが違うだけで、基本的にやり方は同じです。<br/>
</p>
</div>
<div class="secedit editbutton_section editbutton_2"></div>
<h1 class="sectionedit3" id="武器フォント_てつのけんを鉄の剣にしよう">武器フォント　てつのけんを鉄の剣にしよう。</h1>
<div class="level1">
<p>
FE8には、武器フォントで鉄というフォントがなぜありません。<br/>
鉄の剣とすると、♡の剣になります。<br/>
<a class="media" href="https://i.imgur.com/9iILbuU.jpg" title="https://i.imgur.com/9iILbuU.jpg"><img alt="i.imgur.com_9iilbuu.jpg" class="mediacenter" src="https://i.imgur.com/9iILbuU.jpg" title="i.imgur.com_9iilbuu.jpg"/></a>
</p>
<p>
step_a00<br/>
FE8にはありませんが、FE7には、鉄の剣というアイテムが有り、鉄という武器フォントが存在します。<br/>
もし、貴方がFE7をもっているならば、そこからフォントを頂いてくることが出来ます。<br/>
</p>
</div>
<div class="secedit editbutton_section editbutton_3"></div>
<h2 class="sectionedit4" id="step_a01">step_a01</h2>
<div class="level2">
<p>
fefontを起動します。<br/>
<a class="media" href="https://i.imgur.com/rMotXPp.jpg" title="https://i.imgur.com/rMotXPp.jpg"><img alt="i.imgur.com_rmotxpp.jpg" class="mediacenter" src="https://i.imgur.com/rMotXPp.jpg" title="i.imgur.com_rmotxpp.jpg"/></a>
</p>
</div>
<div class="secedit editbutton_section editbutton_4"></div>
<h2 class="sectionedit5" id="step_a02">step_a02</h2>
<div class="level2">
<p>
Load ROMで fe7 をロードします。<br/>
<a class="media" href="https://i.imgur.com/L3bbQXE.jpg" title="https://i.imgur.com/L3bbQXE.jpg"><img alt="i.imgur.com_l3bbqxe.jpg" class="mediacenter" src="https://i.imgur.com/L3bbQXE.jpg" title="i.imgur.com_l3bbqxe.jpg"/></a>
</p>
</div>
<div class="secedit editbutton_section editbutton_5"></div>
<h2 class="sectionedit6" id="step_a03">step_a03</h2>
<div class="level2">
<p>
FE7の武器のフォントを参照したいので、コンボボックスから、<br/>
FE7烈火 武器文字　を選択します。<br/>
<a class="media" href="https://i.imgur.com/xRlHO8Z.jpg" title="https://i.imgur.com/xRlHO8Z.jpg"><img alt="i.imgur.com_xrlho8z.jpg" class="mediacenter" src="https://i.imgur.com/xRlHO8Z.jpg" title="i.imgur.com_xrlho8z.jpg"/></a>
</p>
</div>
<div class="secedit editbutton_section editbutton_6"></div>
<h2 class="sectionedit7" id="step_a04">step_a04</h2>
<div class="level2">
<p>
参照したいのは、「鉄」ですので、<br/>
文字に「鉄」と入れます。<br/>
<a class="media" href="https://i.imgur.com/wDD0yMT.jpg" title="https://i.imgur.com/wDD0yMT.jpg"><img alt="i.imgur.com_wdd0ymt.jpg" class="mediacenter" src="https://i.imgur.com/wDD0yMT.jpg" title="i.imgur.com_wdd0ymt.jpg"/></a>
</p>
</div>
<div class="secedit editbutton_section editbutton_7"></div>
<h2 class="sectionedit8" id="step_a05">step_a05</h2>
<div class="level2">
<p>
検索ボタンを押して、文字を探します。<br/>
<a class="media" href="https://i.imgur.com/cwwsOJN.jpg" title="https://i.imgur.com/cwwsOJN.jpg"><img alt="i.imgur.com_cwwsojn.jpg" class="mediacenter" src="https://i.imgur.com/cwwsOJN.jpg" title="i.imgur.com_cwwsojn.jpg"/></a>
</p>
</div>
<div class="secedit editbutton_section editbutton_8"></div>
<h2 class="sectionedit9" id="step_a06">step_a06</h2>
<div class="level2">
<p>
文字が見つかりました。<br/>
<a class="media" href="https://i.imgur.com/nJaMvTz.jpg" title="https://i.imgur.com/nJaMvTz.jpg"><img alt="i.imgur.com_njamvtz.jpg" class="mediacenter" src="https://i.imgur.com/nJaMvTz.jpg" title="i.imgur.com_njamvtz.jpg"/></a>
</p>
<p>
「あ鉄うえ」と表示されているのは、フォントサンプルを描画しているためです。<br/>
後で説明します。<br/>
</p>
</div>
<div class="secedit editbutton_section editbutton_9"></div>
<h2 class="sectionedit10" id="step_a07">step_a07</h2>
<div class="level2">
<p>
文字が出たので、画像エクスポートボタンでpng画像として保存してください。<br/>
次は、このフォントをFE8に移植します。<br/>
<a class="media" href="https://i.imgur.com/saJJ5sM.jpg" title="https://i.imgur.com/saJJ5sM.jpg"><img alt="i.imgur.com_sajj5sm.jpg" class="mediacenter" src="https://i.imgur.com/saJJ5sM.jpg" title="i.imgur.com_sajj5sm.jpg"/></a>
</p>
</div>
<div class="secedit editbutton_section editbutton_10"></div>
<h2 class="sectionedit11" id="step_a08">step_a08</h2>
<div class="level2">
<p>
とりあえず、FE FONTを一度終了して、再度立ち上げ直してください。<br/>
<a class="media" href="https://i.imgur.com/SN13XBp.jpg" title="https://i.imgur.com/SN13XBp.jpg"><img alt="i.imgur.com_sn13xbp.jpg" class="mediacenter" src="https://i.imgur.com/SN13XBp.jpg" title="i.imgur.com_sn13xbp.jpg"/></a><br/>
<br/>
立ち上げたら、 Load ROM を選択して FE8を開いてください。<br/>
<a class="media" href="https://i.imgur.com/R3Pj7NA.jpg" title="https://i.imgur.com/R3Pj7NA.jpg"><img alt="i.imgur.com_r3pj7na.jpg" class="mediacenter" src="https://i.imgur.com/R3Pj7NA.jpg" title="i.imgur.com_r3pj7na.jpg"/></a><br/>
<br/>
(もちろん、FE7を立ち上げぱなしにしたり、設定を変えて再利用してもいいです。)<br/>
</p>
</div>
<div class="secedit editbutton_section editbutton_11"></div>
<h2 class="sectionedit12" id="step_a09">step_a09</h2>
<div class="level2">
<p>
FE8聖魔の武器文字に、フォントを追加するので、<br/>
一番上の「FE8聖魔 武器文字」を選択します。<br/>
<a class="media" href="https://i.imgur.com/NYcXb0D.jpg" title="https://i.imgur.com/NYcXb0D.jpg"><img alt="i.imgur.com_nycxb0d.jpg" class="mediacenter" src="https://i.imgur.com/NYcXb0D.jpg" title="i.imgur.com_nycxb0d.jpg"/></a>
</p>
</div>
<div class="secedit editbutton_section editbutton_12"></div>
<h2 class="sectionedit13" id="step_a10">step_a10</h2>
<div class="level2">
<p>
FE8のROMから、該当文字を探すので、<br/>
文字に「鉄」と入れ、検索ボタンを押してください。<br/>
<a class="media" href="https://i.imgur.com/oGruQWY.jpg" title="https://i.imgur.com/oGruQWY.jpg"><img alt="i.imgur.com_ogruqwy.jpg" class="mediacenter" src="https://i.imgur.com/oGruQWY.jpg" title="i.imgur.com_ogruqwy.jpg"/></a>
</p>
</div>
<div class="secedit editbutton_section editbutton_13"></div>
<h2 class="sectionedit14" id="step_a11">step_a11</h2>
<div class="level2">
<p>
FE8には、「鉄」という武器文字フォントがないので、該当するフォントはありませんとエラーが表示されました。<br/>
とりあえず、OKを押します。<br/>
<a class="media" href="https://i.imgur.com/zOg6eST.jpg" title="https://i.imgur.com/zOg6eST.jpg"><img alt="i.imgur.com_zog6est.jpg" class="mediacenter" src="https://i.imgur.com/zOg6eST.jpg" title="i.imgur.com_zog6est.jpg"/></a>
</p>
</div>
<div class="secedit editbutton_section editbutton_14"></div>
<h2 class="sectionedit15" id="step_a12">step_a12</h2>
<div class="level2">
<p>
新規にフォントを追加するので、ROMの末尾にポインタが移動されました。<br/>
この領域に鉄という武器文字フォントを差し込みます。<br/>
(フォントはどこの領域にでも設定できるので、ほかに割り当てたい領域があればアドレスを移動してください。)<br/>
<a class="media" href="https://i.imgur.com/OzM5ffH.jpg" title="https://i.imgur.com/OzM5ffH.jpg"><img alt="i.imgur.com_ozm5ffh.jpg" class="mediacenter" src="https://i.imgur.com/OzM5ffH.jpg" title="i.imgur.com_ozm5ffh.jpg"/></a>
</p>
</div>
<div class="secedit editbutton_section editbutton_15"></div>
<h2 class="sectionedit16" id="step_a13">step_a13</h2>
<div class="level2">
<p>
画像インポートを選択し、先ほどもってきた「鉄」という武器文字フォント画像を指定します。<br/>
<a class="media" href="https://i.imgur.com/fE3lvjG.jpg" title="https://i.imgur.com/fE3lvjG.jpg"><img alt="i.imgur.com_fe3lvjg.jpg" class="mediacenter" src="https://i.imgur.com/fE3lvjG.jpg" title="i.imgur.com_fe3lvjg.jpg"/></a>
</p>
</div>
<div class="secedit editbutton_section editbutton_16"></div>
<h2 class="sectionedit17" id="step_a14">step_a14</h2>
<div class="level2">
<p>
インポートできました。<br/>
(まだ結果は確定していません。)<br/>
<a class="media" href="https://i.imgur.com/BWm0qis.jpg" title="https://i.imgur.com/BWm0qis.jpg"><img alt="i.imgur.com_bwm0qis.jpg" class="mediacenter" src="https://i.imgur.com/BWm0qis.jpg" title="i.imgur.com_bwm0qis.jpg"/></a>
</p>
</div>
<div class="secedit editbutton_section editbutton_17"></div>
<h2 class="sectionedit18" id="step_a15">step_a15</h2>
<div class="level2">
<p>
文字幅があっていないので、文字幅を調整して、<br/>
後ろの文字がいい感じの位置に来るようにしてください。<br/>
<a class="media" href="../http///i.imgur.com/CJbms5t.jpg" title="http://i.imgur.com/CJbms5t.jpg"><img alt="i.imgur.com_cjbms5t.jpg" class="mediacenter" src="../http///i.imgur.com/CJbms5t.jpg" title="i.imgur.com_cjbms5t.jpg"/></a>
</p>
</div>
<div class="secedit editbutton_section editbutton_18"></div>
<h2 class="sectionedit19" id="step_a16">step_a16</h2>
<div class="level2">
<p>
位置を調整する時は、サンプル倍率で変更すると、<br/>
フォントを拡大してみることができるので便利です。<br/>
<a class="media" href="../http///i.imgur.com/XzvstoO.jpg" title="http://i.imgur.com/XzvstoO.jpg"><img alt="i.imgur.com_xzvstoo.jpg" class="mediacenter" src="../http///i.imgur.com/XzvstoO.jpg" title="i.imgur.com_xzvstoo.jpg"/></a>
</p>
<p>
サンプルとなっているものは、フォントを設定しやすくするための便利機能です。<br/>
ここでどんな設定をしても、設定には影響しません。<br/>
<br/>
サンプル倍率を変更すれば、フォントを拡大して見やすくなります。<br/>
サンプル背景を変えれば、さまざまな背景下でフォントがどう見えるのかわかります。<br/>
サンプル文字列では、フォントの前の文字と後ろの文字を出して、つながりを見ることが出来ます。<br/>
(「あ鉄うえ」　と表示されているのは、サンプル文字列で、「あ○うえ」としているためです。○が現在変更している文字になります。)<br/>
<br/>
武器文字は、ステータス画面や、メニュー等で使われるので、<br/>
サンプル背景色を変えて、どう見えるのか確認しましょう。<br/>
<a class="media" href="https://i.imgur.com/F9OMiVD.jpg" title="https://i.imgur.com/F9OMiVD.jpg"><img alt="i.imgur.com_f9omivd.jpg" class="mediacenter" src="https://i.imgur.com/F9OMiVD.jpg" title="i.imgur.com_f9omivd.jpg"/></a>
</p>
</div>
<div class="secedit editbutton_section editbutton_19"></div>
<h2 class="sectionedit20" id="step_a17">step_a17</h2>
<div class="level2">
<p>
ここまで確認して、問題なさそうであれば、<br/>
Write ROM ボタンで、ROMに焼きこみます。<br/>
<a class="media" href="../http///i.imgur.com/T3Fpl3W.jpg" title="http://i.imgur.com/T3Fpl3W.jpg"><img alt="i.imgur.com_t3fpl3w.jpg" class="mediacenter" src="../http///i.imgur.com/T3Fpl3W.jpg" title="i.imgur.com_t3fpl3w.jpg"/></a>
</p>
</div>
<div class="secedit editbutton_section editbutton_20"></div>
<h2 class="sectionedit21" id="step_a18">step_a18</h2>
<div class="level2">
<p>
早速ゲームを開始してみましょう。<br/>
先ほど差し込んだフォントによって、鉄の剣と、正しく表示されているはずです。<br/>
<a class="media" href="../http///i.imgur.com/GbNYQA3.jpg" title="http://i.imgur.com/GbNYQA3.jpg"><img alt="i.imgur.com_gbnyqa3.jpg" class="mediacenter" src="../http///i.imgur.com/GbNYQA3.jpg" title="i.imgur.com_gbnyqa3.jpg"/></a>
</p>
</div>
<div class="secedit editbutton_section editbutton_21"></div>
<h1 class="sectionedit22" id="台詞フォントにない文字を作ろう">台詞フォントにない文字を作ろう</h1>
<div class="level1">
<p>
これは明らかに矛盾しています。という時の「矛」という台詞フォントがFE8にはありません。<br/>
今度は、矛というフォントを作ってみましょう。<br/>
<a class="media" href="https://i.imgur.com/GpwfsFE.jpg" title="https://i.imgur.com/GpwfsFE.jpg"><img alt="i.imgur.com_gpwfsfe.jpg" class="mediacenter" src="https://i.imgur.com/GpwfsFE.jpg" title="i.imgur.com_gpwfsfe.jpg"/></a>
</p>
<p>
鉄という武器フォントは、FE7にありましたが、<br/>
今回は多分ないと思うので、自分で書かなければいけません。<br/>
いちから書いてもいいのですが、何か参考になる物があったほうがいいです。<br/>
矛という字に似ている字で、FE8にあるとすれば、予という字でしょう。<br/>
予という字を取り出して、それを元に矛という字にしてみましょう。<br/>
</p>
</div>
<div class="secedit editbutton_section editbutton_22"></div>
<h2 class="sectionedit23" id="step_b01">step_b01</h2>
<div class="level2">
<p>
Load ROM で FE8 の ROMを読み込みます。<br/>
<a class="media" href="https://i.imgur.com/R3Pj7NA.jpg" title="https://i.imgur.com/R3Pj7NA.jpg"><img alt="i.imgur.com_r3pj7na.jpg" class="mediacenter" src="https://i.imgur.com/R3Pj7NA.jpg" title="i.imgur.com_r3pj7na.jpg"/></a>
</p>
</div>
<div class="secedit editbutton_section editbutton_23"></div>
<h2 class="sectionedit24" id="step_b02">step_b02</h2>
<div class="level2">
<p>
FE8聖魔 セリフ文字を選択します。<br/>
<a class="media" href="https://i.imgur.com/29XExYd.jpg" title="https://i.imgur.com/29XExYd.jpg"><img alt="i.imgur.com_29xexyd.jpg" class="mediacenter" src="https://i.imgur.com/29XExYd.jpg" title="i.imgur.com_29xexyd.jpg"/></a>
</p>
</div>
<div class="secedit editbutton_section editbutton_24"></div>
<h2 class="sectionedit25" id="step_b03">step_b03</h2>
<div class="level2">
<p>
いきなり、矛をつくるとつらいので似ている文字として、<br/>
予を取得します。<br/>
<br/>
文字に「予」と入れ、検索ボタンを押してください。<br/>
<a class="media" href="https://i.imgur.com/rxSoCgp.jpg" title="https://i.imgur.com/rxSoCgp.jpg"><img alt="i.imgur.com_rxsocgp.jpg" class="mediacenter" src="https://i.imgur.com/rxSoCgp.jpg" title="i.imgur.com_rxsocgp.jpg"/></a>
</p>
</div>
<div class="secedit editbutton_section editbutton_25"></div>
<h2 class="sectionedit26" id="step_b04">step_b04</h2>
<div class="level2">
<p>
予というフォントがあったので表示されました。<br/>
<a class="media" href="https://i.imgur.com/HWOf8yO.jpg" title="https://i.imgur.com/HWOf8yO.jpg"><img alt="i.imgur.com_hwof8yo.jpg" class="mediacenter" src="https://i.imgur.com/HWOf8yO.jpg" title="i.imgur.com_hwof8yo.jpg"/></a>
</p>
</div>
<div class="secedit editbutton_section editbutton_26"></div>
<h2 class="sectionedit27" id="step_b05">step_b05</h2>
<div class="level2">
<p>
背景色がちょっと読みづらいので変更しましょう。<br/>
<a class="media" href="https://i.imgur.com/XhjSqZ9.jpg" title="https://i.imgur.com/XhjSqZ9.jpg"><img alt="i.imgur.com_xhjsqz9.jpg" class="mediacenter" src="https://i.imgur.com/XhjSqZ9.jpg" title="i.imgur.com_xhjsqz9.jpg"/></a>
</p>
</div>
<div class="secedit editbutton_section editbutton_27"></div>
<h2 class="sectionedit28" id="step_b06">step_b06</h2>
<div class="level2">
<p>
セリフの吹き出しと同じ色にしてみました。<br/>
<a class="media" href="https://i.imgur.com/Ie1Bzcm.jpg" title="https://i.imgur.com/Ie1Bzcm.jpg"><img alt="i.imgur.com_ie1bzcm.jpg" class="mediacenter" src="https://i.imgur.com/Ie1Bzcm.jpg" title="i.imgur.com_ie1bzcm.jpg"/></a>
</p>
</div>
<div class="secedit editbutton_section editbutton_28"></div>
<h2 class="sectionedit29" id="step_b07">step_b07</h2>
<div class="level2">
<p>
この、予という字をもとに、矛というフォントを作ります。<br/>
画像エクスポートで png画像として取り出します。<br/>
<a class="media" href="https://i.imgur.com/IVDn5JG.jpg" title="https://i.imgur.com/IVDn5JG.jpg"><img alt="i.imgur.com_ivdn5jg.jpg" class="mediacenter" src="https://i.imgur.com/IVDn5JG.jpg" title="i.imgur.com_ivdn5jg.jpg"/></a>
</p>
</div>
<div class="secedit editbutton_section editbutton_29"></div>
<h2 class="sectionedit30" id="step_b08">step_b08</h2>
<div class="level2">
<p>
edge取り出した画像を edge で開いてください。<br/>
<a class="media" href="https://i.imgur.com/JLcTiGd.jpg" title="https://i.imgur.com/JLcTiGd.jpg"><img alt="i.imgur.com_jlctigd.jpg" class="mediacenter" src="https://i.imgur.com/JLcTiGd.jpg" title="i.imgur.com_jlctigd.jpg"/></a>
</p>
</div>
<div class="secedit editbutton_section editbutton_30"></div>
<h2 class="sectionedit31" id="step_b09">step_b09</h2>
<div class="level2">
<p>
変更する前に、パレットの解説をします。<br/>
すべてのフォントは、4色の画像です。(4色無圧縮画像としてrom内に保存されています)<br/>
4色画像なので、4色を超える色で画像を書いてはいけません。<br/>
利用できるのは、左上の4つのパレットだけです。<br/>
そして、一番左上の0番パレットは背景色となります。<br/>
実質3色で書く必要があります。<br/>
<a class="media" href="../http///i.imgur.com/16iZyjU.jpg" title="http://i.imgur.com/16iZyjU.jpg"><img alt="i.imgur.com_16izyju.jpg" class="mediacenter" src="../http///i.imgur.com/16iZyjU.jpg" title="i.imgur.com_16izyju.jpg"/></a>
</p>
<p>
また、フォントのパレットは予め決まっています。<br/>
パレットの色を変更してもフォントの色としては反映されません。<br/>
パレットは以下のようになります。<br/>
</p>
<div class="table sectionedit32"><table class="inline">
<tr class="row0">
<td class="col0">0番</td><td class="col1">透明色</td>
</tr>
<tr class="row1">
<td class="col0">1番</td><td class="col1">中間色</td>
</tr>
<tr class="row2">
<td class="col0">2番</td><td class="col1">白色</td>
</tr>
<tr class="row3">
<td class="col0">3番</td><td class="col1">黒色</td>
</tr>
</table></div>
</div>
<div class="secedit editbutton_section editbutton_31"></div>
<h2 class="sectionedit33" id="step_b10">step_b10</h2>
<div class="level2">
<p>
予に書き足して、矛にしてみました。<br/>
簡単な修正ですが、それっぽく見えますでしょうか？<br/>
<br/>
<a class="media" href="https://i.imgur.com/JEXibWK.jpg" title="https://i.imgur.com/JEXibWK.jpg"><img alt="i.imgur.com_jexibwk.jpg" class="mediacenter" src="https://i.imgur.com/JEXibWK.jpg" title="i.imgur.com_jexibwk.jpg"/></a><br/>
<br/>
満足のいくものができたら、入れ込み作業を行います。<br/>
</p>
</div>
<div class="secedit editbutton_section editbutton_33"></div>
<h2 class="sectionedit34" id="step_b11">step_b11</h2>
<div class="level2">
<p>
FE Fontで、<br/>
文字を「矛」にして検索ボタンを押します。<br/>
<a class="media" href="../http///i.imgur.com/o43bSbv.jpg" title="http://i.imgur.com/o43bSbv.jpg"><img alt="i.imgur.com_o43bsbv.jpg" class="mediacenter" src="../http///i.imgur.com/o43bSbv.jpg" title="i.imgur.com_o43bsbv.jpg"/></a>
</p>
</div>
<div class="secedit editbutton_section editbutton_34"></div>
<h2 class="sectionedit35" id="step_b12">step_b12</h2>
<div class="level2">
<p>
「矛」という文字はないので、エラーが表示されますが、<br/>
OKボタンを押してそのまま進みます。<br/>
<a class="media" href="../http///i.imgur.com/UNolpL3.jpg" title="http://i.imgur.com/UNolpL3.jpg"><img alt="i.imgur.com_unolpl3.jpg" class="mediacenter" src="../http///i.imgur.com/UNolpL3.jpg" title="i.imgur.com_unolpl3.jpg"/></a>
</p>
</div>
<div class="secedit editbutton_section editbutton_35"></div>
<h2 class="sectionedit36" id="step_b13">step_b13</h2>
<div class="level2">
<p>
武器フォントの時にも説明しましたが、フォントはどこのアドレスにでも置けるので、好きな空き領域に配置してください。<br/>
(何も設定しないと、ROM末尾に追加になります。)<br/>
<a class="media" href="../http///i.imgur.com/L6iqdMq.jpg" title="http://i.imgur.com/L6iqdMq.jpg"><img alt="i.imgur.com_l6iqdmq.jpg" class="mediacenter" src="../http///i.imgur.com/L6iqdMq.jpg" title="i.imgur.com_l6iqdmq.jpg"/></a>
</p>
</div>
<div class="secedit editbutton_section editbutton_36"></div>
<h2 class="sectionedit37" id="step_b14">step_b14</h2>
<div class="level2">
<p>
画像インポートで、先ほど作った「矛」というpng画像を読み込みます。<br/>
<a class="media" href="../http///i.imgur.com/ac4UugQ.jpg" title="http://i.imgur.com/ac4UugQ.jpg"><img alt="i.imgur.com_ac4uugq.jpg" class="mediacenter" src="../http///i.imgur.com/ac4UugQ.jpg" title="i.imgur.com_ac4uugq.jpg"/></a>
</p>
</div>
<div class="secedit editbutton_section editbutton_37"></div>
<h2 class="sectionedit38" id="step_b15">step_b15</h2>
<div class="level2">
<p>
読み込めました。<br/>
<a class="media" href="../http///i.imgur.com/xHBABIs.jpg" title="http://i.imgur.com/xHBABIs.jpg"><img alt="i.imgur.com_xhbabis.jpg" class="mediacenter" src="../http///i.imgur.com/xHBABIs.jpg" title="i.imgur.com_xhbabis.jpg"/></a>
</p>
</div>
<div class="secedit editbutton_section editbutton_38"></div>
<h2 class="sectionedit39" id="step_b16">step_b16</h2>
<div class="level2">
<p>
漢字とひらがなだと高さがちょっと違うので、<br/>
漢字同士並べた時の動作を確認したいものです。<br/>
<br/>
こういうときには、サンプル文字列を利用します。<br/>
「これは○盾してる」などといれると、○の部分が変更したいフォントになります。<br/>
<a class="media" href="../http///i.imgur.com/59b6o7j.jpg" title="http://i.imgur.com/59b6o7j.jpg"><img alt="i.imgur.com_59b6o7j.jpg" class="mediacenter" src="../http///i.imgur.com/59b6o7j.jpg" title="i.imgur.com_59b6o7j.jpg"/></a>
</p>
<p>
サンプル倍率を変えれば、拡大もできます。<br/>
サンプルという名前の項目を変更しても、保存されるデータには一切関与しないので、見やすいように調整してください。<br/>
<a class="media" href="../http///i.imgur.com/dDm4ZSv.jpg" title="http://i.imgur.com/dDm4ZSv.jpg"><img alt="i.imgur.com_ddm4zsv.jpg" class="mediacenter" src="../http///i.imgur.com/dDm4ZSv.jpg" title="i.imgur.com_ddm4zsv.jpg"/></a>
</p>
</div>
<div class="secedit editbutton_section editbutton_39"></div>
<h2 class="sectionedit40" id="step_b17">step_b17</h2>
<div class="level2">
<p>
フォントの字幅を調整してください。<br/>
そして、満足いくのができたら、 Write ROMで保存してください。<br/>
<a class="media" href="../http///i.imgur.com/C4z02WA.jpg" title="http://i.imgur.com/C4z02WA.jpg"><img alt="i.imgur.com_c4z02wa.jpg" class="mediacenter" src="../http///i.imgur.com/C4z02WA.jpg" title="i.imgur.com_c4z02wa.jpg"/></a>
</p>
</div>
<div class="secedit editbutton_section editbutton_40"></div>
<h2 class="sectionedit41" id="step_b18">step_b18</h2>
<div class="level2">
<p>
さっそくゲームを開始して、入れたフォントを確認してみましょう。<br/>
先ほど差し込んだフォントによって、矛盾と表示されていますね。<br/>
<a class="urlextern" href="https://i.imgur.com/WVOPce2.png" rel="nofollow" title="https://i.imgur.com/WVOPce2.png">https://i.imgur.com/WVOPce2.png</a>
</p>
<p>
<br/>
以上で、武器とセリフのフォントの改造方法<br/>
移植する時と、似ているフォントから作成する方法についての解説を終わります。<br/>
これでどんな文字でも作れるようになりました。<br/>
面白い物語を作ってくださいね。<br/>
</p>
</div>
<div class="secedit editbutton_section editbutton_41"></div>
<h1 class="sectionedit42" id="トラブルシューティング">トラブルシューティング</h1>
<div class="level1">
</div>
<div class="secedit editbutton_section editbutton_42"></div>
<h2 class="sectionedit43" id="qインポートしたフォントが何かおかしい">Q:インポートしたフォントが何かおかしい</h2>
<div class="level2">
<p>
A.左上の4色だけで書いていますか？<br/>
4番目の黒色と間違えて、5番目以降の黒色で書いていることが有ります。<br/>
ちゃんと、左上の4つの色だけで書いているか確認してください。<br/>
<br/>
<a class="media" href="../http///i.imgur.com/16iZyjU.jpg" title="http://i.imgur.com/16iZyjU.jpg"><img alt="i.imgur.com_16izyju.jpg" class="mediacenter" src="../http///i.imgur.com/16iZyjU.jpg" title="i.imgur.com_16izyju.jpg"/></a>
</p>
</div>
<div class="secedit editbutton_section editbutton_43"></div>
<h1 class="sectionedit44" id="技術資料">技術資料</h1>
<div class="level1">
<p>
此処から先はフォント構造がどうやって作られているのかという解析資料です。<br/>
特に読む必要はありませんが、詳しく知りたい方はどうぞ。<br/>
</p>
</div>
<div class="secedit editbutton_section editbutton_44"></div>
<h2 class="sectionedit45" id="アルゴリズム">アルゴリズム</h2>
<div class="level2">
<p>
フォントはハッシュとリスト形式で管理されています。<br/>
</p>
<div class="table sectionedit46"><table class="inline">
<tr class="row0">
<td class="col0">聖魔武器フォントリストスタート</td><td class="col1">0x57994c</td>
</tr>
<tr class="row1">
<td class="col0">聖魔セリフフォントリストスタート</td><td class="col1">0x593f74</td>
</tr>
<tr class="row2">
<td class="col0">烈火武器フォントリストスタート</td><td class="col1">0xbc1fec</td>
</tr>
<tr class="row3">
<td class="col0">烈火セリフフォントリストスタート</td><td class="col1">0xbdc1e0</td>
</tr>
<tr class="row4">
<td class="col0">封印武器フォントリストスタート</td><td class="col1">0x59027c</td>
</tr>
<tr class="row5">
<td class="col0">封印セリフフォントリストスタート</td><td class="col1">0x5a82b0</td>
</tr>
</table></div>
<p>
(海外版FEはアルゴリズムが違うような気がするので未対応。)
</p>
<p>
フォントリストスタートから、たくさんのフォントリストのポインタが伸びています。<br/>
どのフォントリストを使うかは、SJISの1バイト目を利用して以下の計算式で決定します。<br/>
</p>
<pre class="code">探索するリスト=フォントリストスタート + (SJIS1バイト目 &lt;&lt; 2) - 0x100</pre>
<p>
<br/>
例えば、聖魔武器フォントで、紋SJIS(0xE496)だと、<br/>
</p>
<pre class="code">例:紋 SJIS(0xE496)
0x57994c + (0xE4 &lt;&lt; 2) - 0x100 = 0x579BDC</pre>
<p>
<br/>
よって、0x579BDCから、0xE4?? フォントリストがスタートします。<br/>
<br/>
このフォントリストを、2バイト目 0x96 を頼りに、<br/>
0x579BDCから fontlist→next と、線形にたどります。<br/>
そして、 fontlist→SJIS2 == 0x96 のを見つけたら、<br/>
それが「紋」のフォントのデータということになります。<br/>
</p>
</div>
<div class="secedit editbutton_section editbutton_45"></div>
<h2 class="sectionedit47" id="フォント構造体">フォント構造体</h2>
<div class="level2">
<pre class="code">フォントのビットマップデータは、1文字72バイト(0x48)の固定長でリスト構造
先頭4バイトは次のリストへのポインタ 終端はNULL
5バイト目が探索のためのSJISの2バイト目の1バイト (例: 紋 SJIS(0xE496)だと、0x96)
6バイト目が文字幅(次の文字を描くとき、このサイズだけ空ける cssでいうleft-paddingみたいな)
7バイト目は謎
8バイト目は謎
以下 64バイト(0x40)の4bit無圧縮ビットマップデータです。
</pre>
<p>
//フォント構造について、Cで書くと、こういうリスト構造だと思われる.
</p>
<pre class="code">struct fontlist
{
    fontlist* next;	//次のフォントポインタ。 終端の場合は 0x00 00 00 00 だと思う。
    BYTE SJIS2;	//紋 SJIS(0xE496)だと、2バイト目の 0x96 が入る.
    			//ここが不一致だと、文字が出ずに不明な文字としてハートになる
    BYTE WIDTH;	//文字幅(次の文字を描くとき、このサイズだけ空ける cssでいうpaddingみたいな)
    			//0x09だと、次の文字を 9ドット開けて描く。(多分)
    			//0x00だと、余白がなく次の文字とかぶさってしまう。
    BYTE dummy[2];	//意味不明(もしかしたら文字によって何か変わる可能性もあり、要検証)
    BYTE bitmap[64]; //無圧縮 4bit bitmap
    			//0(2進数:00) -&gt; 透明
    			//1(2進数:01) -&gt; 薄いグレー
    			//2(2進数:10) -&gt; 白
    			//3(2進数:11) -&gt; 黒
    			//4(2進数:0100) -&gt; 1ドット目は透明で、その1ドット横に薄いグレー。
    			//...
    			//よって、0xFF で 4ドットの黒い線が引ける.
    			//64バイト 0xFFで埋めると、■な四角形。
    			//4バイトで1ラインっぽい。 つまり、4バイト*4ドット=16ドット描ける。
    			//64バイト/4=16 なので、 横 16ドット  縦 16ドットなはず・・・
    			//ただ、64バイト 0xFFで埋めると、正方形ではなく横長の長方形っぽい絵になるので、違うのかもしれない
};</pre>
</div>
<div class="secedit editbutton_section editbutton_47"></div>
<h2 class="sectionedit48" id="擬似コード">擬似コード</h2>
<div class="level2">
<pre class="code">//紋 SJIS(0xE496)
byte sjis1 = 0xE4;
byte sjis2 = 0x96;
dword topaddress = 57994c;

fontlist* p = topaddress + (sjis1 &lt;&lt; 2) - 0x100;

while(*p)
{
	if ( p-&gt;check == sjis2 )
	{//探していたフォント
		//p-&gt;width  文字幅
		//p-&gt;bitmap フォント画像
		return p;
	}
	//次のリストへ
	p = p-&gt;next;
}</pre>
</div>
<div class="secedit editbutton_section editbutton_48"></div>
<!-- wikipage stop -->
</div>
<div class="docInfo"><bdi>guide/フォント改造.txt</bdi> · 最終更新: 2018/09/23 18:58 by <bdi>211.14.62.193</bdi></div>
</div></div><!-- /content -->
<hr class="a11y"/>
<!-- PAGE ACTIONS -->
</div><!-- /wrapper -->
<!-- ********** FOOTER ********** -->
<!-- /footer -->
</div></div><!-- /site -->
<div class="no" id="screen__mode"></div></body>
</html>
